<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MSWRPVHBQF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MSWRPVHBQF');
    </script>
    
    <!-- Advanced SEO Meta Tags -->
    <title>Professional Health Calculators 2025 - BMI, Calorie, Pregnancy, TDEE & Medical Tools | RapidPercent</title>
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="description" content="Free medical-grade health calculators: BMI with WHO standards, TDEE/calorie needs (Mifflin-St Jeor), pregnancy due date, ovulation tracker, water intake, body fat %, ideal weight, BMR, macros, heart rate zones, blood pressure monitor. Professional accuracy for wellness & fitness.">
    <link rel="canonical" href="https://rapidpercent.com/health-calculators.html">
    
    <!-- Keywords for better indexing -->
    <meta name="keywords" content="BMI calculator, calorie calculator, pregnancy calculator, ovulation calculator, TDEE calculator, body fat calculator, health tools, fitness calculator, BMR calculator, macro calculator, heart rate zones, blood pressure tracker, water intake calculator, ideal weight calculator, medical calculator">
    
    <!-- Open Graph Enhanced -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="RapidPercent - Professional Health Calculators">
    <meta property="og:url" content="https://rapidpercent.com/health-calculators.html">
    <meta property="og:title" content="12 Professional Health Calculators - Medical-Grade Accuracy | RapidPercent">
    <meta property="og:description" content="Calculate BMI, daily calories (TDEE), pregnancy due dates, ovulation, hydration needs, body fat %, and more with scientifically validated formulas. Free, accurate, instant results.">
    <meta property="og:image" content="https://RapidPercent.com/og-health-calculators.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Enhanced -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@RapidPercent">
    <meta name="twitter:creator" content="@RapidPercent">
    <meta name="twitter:title" content="Professional Health Calculators - BMI, Calorie, Pregnancy Tools">
    <meta name="twitter:description" content="12 medical-grade health calculators with scientifically validated formulas. Track BMI, calories, pregnancy, ovulation, hydration, body composition & more.">
    <meta name="twitter:image" content="https://RapidPercent.com/twitter-health-calculators.png">
    
    <!-- Additional SEO -->
    <meta name="author" content="RapidPercent">
    <meta name="publisher" content="RapidPercent">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    
    <!-- Theme & Icons -->
    <meta name="theme-color" content="#2dd4bf">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Enhanced JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "RapidPercent Professional Health Calculators",
        "alternateName": "Health Calculator Suite",
        "url": "https://RapidPercent.com/health-calculators.html",
        "description": "Comprehensive suite of 12 professional health calculators using scientifically validated formulas including BMI (WHO standards), TDEE (Mifflin-St Jeor), pregnancy calculators, body composition tools, and cardiovascular health monitors.",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Web Browser, iOS, Android",
        "browserRequirements": "Requires JavaScript. Modern browser recommended.",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        },
        "creator": {
            "@type": "Organization",
            "name": "RapidPercent",
            "url": "https://RapidPercent.com"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "15247",
            "bestRating": "5",
            "worstRating": "1"
        },
        "featureList": [
            "BMI Calculator with WHO classification standards",
            "TDEE & Daily Calorie Calculator using Mifflin-St Jeor equation",
            "Pregnancy Due Date Calculator with Naegele's rule",
            "Ovulation & Fertility Window Calculator",
            "Personalized Daily Water Intake Calculator",
            "Body Fat Percentage Calculator (US Navy Method)",
            "Ideal Weight Calculator (Devine, Robinson, Miller formulas)",
            "Basal Metabolic Rate (BMR) Calculator",
            "Macronutrient Distribution Calculator",
            "Heart Rate Training Zones Calculator (Karvonen method)",
            "Blood Pressure Tracker with AHA guidelines",
            "Pregnancy Weight Gain Calculator (IOM standards)"
        ],
        "about": {
            "@type": "MedicalWebPage",
            "name": "Health & Wellness Calculators",
            "specialty": "General Health, Nutrition, Fitness, Obstetrics"
        }
    }
    </script>
    
    <!-- Medical Entity Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "MedicalWebPage",
        "name": "Professional Health Calculators",
        "about": {
            "@type": "MedicalCondition",
            "name": "Health Monitoring and Assessment"
        },
        "specialty": [
            "General Health",
            "Nutrition Science",
            "Exercise Physiology",
            "Obstetrics",
            "Cardiology"
        ],
        "audience": {
            "@type": "PeopleAudience",
            "audienceType": "General Public, Healthcare Professionals, Fitness Enthusiasts, Pregnant Women"
        }
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://rapidpercent.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Health Calculators",
                "item": "https://rapidpercent.com/health-calculators.html"
            }
        ]
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 25%, #0d9488 50%, #0f766e 75%, #134e4a 100%);
            --secondary: linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%);
            --accent: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-hover: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 25px 50px -12px rgba(45, 212, 191, 0.25);
            --shadow-lg: 0 35px 60px -15px rgba(45, 212, 191, 0.35);
            --text: #0f172a;
            --text-light: rgba(255, 255, 255, 0.9);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--primary);
            min-height: 100vh;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(45, 212, 191, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(20, 184, 166, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(13, 148, 136, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(16, 185, 129, 0.2) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundPulse 20s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 0 0 32px 32px;
            padding: 50px 0;
            margin-bottom: 50px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: visible;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(45, 212, 191, 0.8) 20%, rgba(45, 212, 191, 0.8) 80%, transparent);
            animation: headerShimmer 3s ease-in-out infinite;
        }

        @keyframes headerShimmer {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(2.5rem, 5vw, 4.5rem);
            font-weight: 900;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.92) 30%, rgba(255, 255, 255, 0.98) 70%, rgba(255, 255, 255, 0.88) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
            letter-spacing: -0.03em;
            text-shadow: 0 2px 10px rgba(255, 255, 255, 0.4);
            filter: drop-shadow(0 2px 4px rgba(255, 255, 255, 0.3));
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .header .tagline {
            text-align: center;
            color: var(--text-light);
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            font-weight: 500;
            opacity: 0.95;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .header .subtitle {
            text-align: center;
            color: var(--text-light);
            font-size: clamp(0.9rem, 2vw, 1.15rem);
            font-weight: 400;
            opacity: 0.88;
            max-width: 800px;
            margin: 0 auto;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            color: var(--text-light);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            background: var(--accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        .calculator-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 60px 50px;
            margin-bottom: 50px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .calculator-section::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 32px;
            padding: 1px;
            background: var(--secondary);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: subtract;
            -webkit-mask-composite: destination-out;
            opacity: 0.6;
        }

        .calculator-section::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(45, 212, 191, 0.1) 0%, transparent 70%);
            animation: sectionPulse 10s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes sectionPulse {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.5; }
            50% { transform: translate(10%, 10%) scale(1.1); opacity: 0.8; }
        }

        .section-title {
            text-align: center;
            font-family: 'Poppins', sans-serif;
            background: var(--secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 800;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .section-description {
            text-align: center;
            color: var(--text-light);
            font-size: clamp(1rem, 2vw, 1.15rem);
            font-weight: 400;
            opacity: 0.92;
            margin-bottom: 45px;
            max-width: 950px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.8;
            position: relative;
            z-index: 1;
        }

        .calculator-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px 20px;
            text-align: center;
            color: var(--text-light);
            font-size: clamp(0.85rem, 1.5vw, 0.98rem);
            font-weight: 600;
            opacity: 0.95;
            margin-bottom: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 25px 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 10px 25px rgba(45, 212, 191, 0.15);
            position: relative;
            z-index: 1;
        }

        .calculator-list span {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            border: 1px solid transparent;
        }

        .calculator-list span:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px) scale(1.05);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 5px 15px rgba(45, 212, 191, 0.2);
        }

        .calculator-list span:not(:last-child)::after {
            content: "•";
            margin-left: 20px;
            opacity: 0.5;
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .calculator-list {
                flex-direction: column;
                gap: 8px;
                padding: 20px;
            }
            
            .calculator-list span:not(:last-child)::after {
                display: none;
            }
            
            .calculator-list span {
                width: 100%;
                text-align: center;
            }
        }

        .calc-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
			gap: 35px;
			position: relative;
			z-index: 1;
		}

        .calc-card {
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(15px);
            border-radius: 28px;
            padding: 45px;
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(45, 212, 191, 0.15);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .calc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--secondary);
            border-radius: 28px 28px 0 0;
            transition: all 0.3s ease;
        }

        .calc-card:hover {
            transform: translateY(-10px) scale(1.01);
            box-shadow: 0 35px 60px -15px rgba(45, 212, 191, 0.25);
            border-color: rgba(45, 212, 191, 0.3);
        }

        .calc-card:hover::before {
            height: 8px;
            background: var(--accent);
        }

        .calc-card h3 {
            color: var(--text);
            font-family: 'Poppins', sans-serif;
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 35px;
            text-align: center;
            background: var(--secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            padding-bottom: 15px;
        }

        .calc-card h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .input-group {
            margin-bottom: 24px;
            position: relative;
        }

        .input-group label {
            display: block;
            margin-bottom: 12px;
            color: #475569;
            font-weight: 600;
            font-size: 0.98rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .label-icon {
            font-size: 1.1rem;
            opacity: 0.7;
        }

        .input-wrapper {
            position: relative;
        }

        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 18px 22px;
            border: 2px solid rgba(45, 212, 191, 0.25);
            border-radius: 16px;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            outline: none;
            font-family: 'Inter', sans-serif;
        }

        .input-group input:focus, 
        .input-group select:focus {
            border-color: #2dd4bf;
            box-shadow: 0 0 0 5px rgba(45, 212, 191, 0.12);
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 1);
        }

        .input-group input.valid {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .input-group input.error {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.08);
            animation: shake 0.4s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .error-message {
            color: var(--danger);
            font-size: 0.88rem;
            font-weight: 600;
            margin-top: 8px;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .success-message {
            color: var(--success);
            font-size: 0.88rem;
            font-weight: 600;
            margin-top: 8px;
            display: none;
            animation: slideDown 0.3s ease;
        }

        .result {
            background: var(--secondary);
            color: white;
            padding: 28px 24px;
            border-radius: 18px;
            text-align: center;
            font-size: 1.35rem;
            font-weight: 700;
            margin-top: 30px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 12px 25px rgba(45, 212, 191, 0.35);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            line-height: 1.5;
        }

        .result::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            animation: resultShimmer 4s infinite;
        }

        .result.calculated {
            animation: resultPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes resultPop {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes resultShimmer {
            0%, 90%, 100% { left: -100%; }
            50% { left: 100%; }
        }

        .result-detail {
            font-size: 0.95rem;
            font-weight: 500;
            opacity: 0.95;
            margin-top: 8px;
            line-height: 1.6;
        }

        .progress-indicator {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
            display: none;
        }

        .progress-bar {
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 3px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .clear-btn {
            position: absolute;
            top: 20px;
            left: 15px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: 0 4px 8px rgba(220, 38, 38, 0.3);
            line-height: 1;
        }

        .clear-btn:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: scale(1.08);
            box-shadow: 0 6px 12px rgba(220, 38, 38, 0.45);
        }

        .clear-btn:active {
            transform: scale(0.95);
        }

        .info-icon {
            position: absolute;
            top: 18px;
            right: 18px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.75;
            z-index: 10;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.15));
            background: rgba(255, 255, 255, 0.9);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(45, 212, 191, 0.3);
        }

        .info-icon:hover {
            transform: scale(1.15) rotate(12deg);
            opacity: 1;
            filter: drop-shadow(0 4px 10px rgba(45, 212, 191, 0.5));
            background: rgba(45, 212, 191, 0.1);
            border-color: rgba(45, 212, 191, 0.6);
        }

        .info-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }

        .info-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .info-modal-content {
			background: linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fcd34d 100%);
			padding: 40px 45px;
			border: 4px solid #f59e0b;
			border-radius: 28px;
			width: 90%;
			max-width: 700px;
			max-height: 88vh;
			overflow-y: auto;
			overflow-x: hidden;
			box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
			animation: slideDownModal 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
			position: relative;
			scroll-behavior: smooth;
		}

        @keyframes slideDownModal {
            from {
                opacity: 0;
                transform: translateY(-60px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .info-modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .info-modal-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .info-modal-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 10px;
        }

        .info-modal-content h3 {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 50%, #0d9488 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 28px;
            text-align: center;
            line-height: 1.3;
            position: relative;
            padding-bottom: 15px;
        }

        .info-modal-content h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #f59e0b, transparent);
            border-radius: 2px;
        }

        .modal-section {
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.5);
            padding: 20px;
            border-radius: 16px;
            border-left: 4px solid #f59e0b;
        }

        .modal-section h4 {
            color: #92400e;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-section p {
            color: #78350f;
            font-size: 1.05rem;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        .modal-section ul {
            color: #78350f;
            font-size: 1.02rem;
            line-height: 1.8;
            margin-left: 20px;
            margin-top: 10px;
        }

        .modal-section li {
            margin-bottom: 8px;
        }

        .example-box {
            background: rgba(255, 255, 255, 0.7);
            border-left: 5px solid #f59e0b;
            padding: 18px;
            border-radius: 14px;
            margin-top: 15px;
            font-size: 1rem;
            color: #78350f;
            font-weight: 500;
            line-height: 1.7;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .example-box strong {
            color: #92400e;
            display: block;
            margin-bottom: 8px;
        }

        .formula-box {
            background: rgba(16, 185, 129, 0.15);
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            color: #065f46;
            font-weight: 600;
            text-align: center;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.12);
            border: 2px solid #ef4444;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            color: #991b1b;
            font-weight: 600;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .warning-box::before {
            content: '⚠️';
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .modal-close-btn {
            background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 50%, #0d9488 100%);
            color: white;
            border: none;
            padding: 16px 50px;
            border-radius: 18px;
            font-size: 1.15rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 25px rgba(45, 212, 191, 0.4);
            display: block;
            margin: 30px auto 0;
            min-width: 180px;
        }

        .modal-close-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(45, 212, 191, 0.55);
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 50%, #0f766e 100%);
        }

        .modal-close-btn:active {
            transform: translateY(-1px);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(50px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .calc-card:nth-child(1) { animation-delay: 0.05s; }
        .calc-card:nth-child(2) { animation-delay: 0.1s; }
        .calc-card:nth-child(3) { animation-delay: 0.15s; }
        .calc-card:nth-child(4) { animation-delay: 0.2s; }
        .calc-card:nth-child(5) { animation-delay: 0.25s; }
        .calc-card:nth-child(6) { animation-delay: 0.3s; }
        .calc-card:nth-child(7) { animation-delay: 0.35s; }
        .calc-card:nth-child(8) { animation-delay: 0.4s; }
        .calc-card:nth-child(9) { animation-delay: 0.45s; }
        .calc-card:nth-child(10) { animation-delay: 0.5s; }
        .calc-card:nth-child(11) { animation-delay: 0.55s; }
        .calc-card:nth-child(12) { animation-delay: 0.6s; }

        .info-section {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 60px 50px;
            margin-bottom: 50px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .info-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.08) 0%, transparent 70%);
            animation: infoPulse 15s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes infoPulse {
            0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.4; }
            50% { transform: translate(-10%, -10%) rotate(180deg); opacity: 0.7; }
        }

        .info-section h2 {
            text-align: center;
            font-family: 'Poppins', sans-serif;
            background: var(--secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: clamp(2.2rem, 4vw, 2.8rem);
            font-weight: 800;
            margin-bottom: 50px;
            position: relative;
            z-index: 1;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 35px;
            margin-bottom: 45px;
            position: relative;
            z-index: 1;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            padding: 35px;
            border-left: 5px solid #2dd4bf;
            box-shadow: 0 15px 35px rgba(45, 212, 191, 0.12);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(45, 212, 191, 0.05) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 25px 45px rgba(45, 212, 191, 0.2);
            border-left-color: #10b981;
            border-left-width: 6px;
        }

        .info-card:hover::before {
            opacity: 1;
        }

        .info-card h4 {
            color: var(--text);
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-card h4::before {
            content: attr(data-icon);
            font-size: 1.5rem;
        }

        .info-card p {
            color: #475569;
            font-size: 1.02rem;
            line-height: 1.8;
        }

        .highlight-box {
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(20px);
            padding: 45px;
            border-radius: 28px;
            margin-top: 45px;
            border: 2px solid rgba(45, 212, 191, 0.3);
            box-shadow: var(--shadow-lg);
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        .highlight-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--accent);
            border-radius: 28px 28px 0 0;
        }

        .highlight-box h3 {
            font-family: 'Poppins', sans-serif;
            background: var(--secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 25px;
        }

        .highlight-box p {
            color: #475569;
            font-size: 1.12rem;
            line-height: 1.9;
        }

        .disclaimer-box {
			background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.08) 100%);
			border: 3px solid #ef4444;
			border-radius: 20px;
			padding: 30px 25px 25px 25px;
			margin-top: 25px;
			position: relative;
		}

        .footer {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 32px 32px 0 0;
            padding: 50px 0;
            text-align: center;
            color: var(--text-light);
            margin-top: 70px;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(45, 212, 191, 0.8) 20%, rgba(45, 212, 191, 0.8) 80%, transparent);
        }

        .footer p {
            margin: 8px 0;
            font-size: 1rem;
        }

        .aads-banner-container {
            margin: 50px auto;
            max-width: 970px;
            text-align: center;
            padding: 25px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 10px 30px rgba(45, 212, 191, 0.1);
        }

        .aads-banner-container #frame {
            max-width: 100%;
        }

        .aads-banner-container iframe {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
        }

        /* Toggle Switch for Units */
        .unit-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(45, 212, 191, 0.1);
            padding: 12px 18px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(45, 212, 191, 0.2);
        }

        .unit-toggle label {
            font-weight: 600;
            color: #475569;
            margin: 0;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e1;
            transition: 0.4s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            margin-left: 5px;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.4;
            font-weight: 500;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #1e293b transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .calc-grid { 
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
                gap: 35px;
            }
            .info-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .header { padding: 40px 0; }
            .calculator-section, .info-section { 
                padding: 35px 25px; 
                border-radius: 24px;
            }
            .calc-card { 
                padding: 35px 25px; 
                border-radius: 20px;
            }
            .calc-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            .info-modal-content {
                padding: 30px 25px;
                width: 95%;
                max-height: 90vh;
                border-radius: 20px;
            }
            .info-modal-content h3 {
                font-size: 1.6rem;
            }
            .modal-section h4 {
                font-size: 1.1rem;
            }
            .modal-section p {
                font-size: 1rem;
            }
            .info-icon {
                font-size: 1.3rem;
                top: 15px;
                right: 15px;
                width: 32px;
                height: 32px;
            }
            .stats-bar {
                gap: 25px;
            }
            .stat-number {
                font-size: 1.6rem;
            }
            .aads-banner-container {
                padding: 15px;
                margin: 35px auto;
            }
            
            .aads-banner-container #frame {
                width: 100% !important;
                max-width: 728px;
            }
            
            .aads-banner-container iframe {
                width: 100% !important;
                max-width: 728px;
            }
            
            /* NUEVO: Disclaimer responsive en tablets/móviles */
            .medical-disclaimer-banner {
                margin: 20px 10px 0 !important;
                padding: 15px 18px !important;
            }
            
            .medical-disclaimer-banner p {
                font-size: 0.88rem !important;
            }
            
            .medical-disclaimer-banner span {
                font-size: 1.1rem !important;
            }
        }

        @media (max-width: 480px) {
            .calc-card { padding: 30px 20px; }
            .info-card { padding: 28px 20px; }
            .highlight-box { padding: 35px 25px; }
            .calculator-list {
                padding: 20px 15px;
            }
            .aads-banner-container #frame {
                width: 100% !important;
                max-width: 320px;
            }
            
            .aads-banner-container iframe {
                width: 100% !important;
                max-width: 320px;
                height: auto !important;
            }
            
            /* NUEVO: Disclaimer para pantallas muy pequeñas */
            .medical-disclaimer-banner {
                margin: 15px 5px 0 !important;
                padding: 12px 15px !important;
            }
            
            .medical-disclaimer-banner > div {
                flex-direction: column !important;
                text-align: center !important;
            }
            
            .medical-disclaimer-banner p {
                font-size: 0.85rem !important;
            }
            
            .medical-disclaimer-banner span {
                font-size: 1.3rem !important;
                margin-bottom: 8px !important;
                display: block !important;
            }
        }

        @media (max-width: 350px) {
            .container { padding: 0 10px; }
            .calc-card { 
                padding: 25px 18px; 
                min-width: 0;
            }
            .info-card { padding: 25px 18px; }
            .calculator-section, .info-section { 
                padding: 30px 18px; 
                border-radius: 20px;
            }
            .highlight-box { 
                padding: 30px 20px; 
                border-radius: 18px;
            }
        }

        /* Print Styles */
        @media print {
            body::before,
            .header::before,
            .calculator-section::after,
            .info-section::before {
                display: none;
            }
            .clear-btn,
            .info-icon,
            .aads-banner-container,
            .footer {
                display: none !important;
            }
            .calc-card {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }
		
		/* Sticky Medical Disclaimer Banner */
		.sticky-medical-disclaimer {
			position: fixed;
			bottom: 0;
			left: 0;
			right: 0;
			background: linear-gradient(135deg, rgba(239, 68, 68, 0.95) 0%, rgba(185, 28, 28, 0.95) 100%);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			padding: 12px 20px;
			z-index: 9999;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 15px;
			box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
			transform: translateY(100%);
			transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		}

		.sticky-medical-disclaimer.visible {
			transform: translateY(0);
		}

		.sticky-medical-disclaimer p {
			color: white;
			font-size: 0.9rem;
			font-weight: 600;
			margin: 0;
			text-align: center;
			line-height: 1.4;
		}

		.sticky-medical-disclaimer .disclaimer-icon {
			font-size: 1.5rem;
			flex-shrink: 0;
		}

		.sticky-medical-disclaimer .close-disclaimer {
			background: rgba(255, 255, 255, 0.2);
			border: none;
			color: white;
			width: 28px;
			height: 28px;
			border-radius: 50%;
			cursor: pointer;
			font-size: 1.1rem;
			font-weight: bold;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
			flex-shrink: 0;
		}

		.sticky-medical-disclaimer .close-disclaimer:hover {
			background: rgba(255, 255, 255, 0.35);
			transform: scale(1.1);
		}

		@media (max-width: 768px) {
			.sticky-medical-disclaimer {
				padding: 10px 15px;
				gap: 10px;
			}
    
			.sticky-medical-disclaimer p {
				font-size: 0.8rem;
			}
    
			.sticky-medical-disclaimer .disclaimer-icon {
				font-size: 1.2rem;
			}
		}

		@media (max-width: 480px) {
			.sticky-medical-disclaimer p {
				font-size: 0.75rem;
			}
		}
		
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="https://rapidpercent.com" style="position: absolute; left: 35px; top: 54%; transform: translateY(-50%); z-index: 9999; text-decoration: none; display: block; transition: all 0.3s ease; filter: drop-shadow(0 4px 15px rgba(251, 191, 36, 0.5)); cursor: pointer; pointer-events: all;" onmouseover="this.style.transform='translateY(-50%) translateX(-6px) scale(1.06)'; this.style.filter='drop-shadow(0 6px 20px rgba(251, 191, 36, 0.7))';" onmouseout="this.style.transform='translateY(-50%)'; this.style.filter='drop-shadow(0 4px 15px rgba(251, 191, 36, 0.5))';" title="Back to RapidPercent Home" aria-label="Return to homepage">
                <svg width="95" height="75" viewBox="0 0 85 75" xmlns="http://www.w3.org/2000/svg" style="display: block; pointer-events: auto;">
                    <path d="M18 37.5 L48 8 L48 26 L85 26 L85 49 L48 49 L48 67 Z" fill="#fbbf24" style="pointer-events: all;"/>
                </svg>
            </a>
            <h1>Professional Health Calculators</h1>
            <p class="tagline">BMI • Calorie/TDEE • Pregnancy • Ovulation • Hydration • Body Composition • Heart Health</p>
            <p class="subtitle">Medical-grade health calculation suite powered by scientifically validated formulas from WHO, AHA, and IOM standards</p>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number">12</span>
                    <div class="stat-label">Professional Tools</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">100%</span>
                    <div class="stat-label">Free Forever</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">Medical</span>
                    <div class="stat-label">Grade Accuracy</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number">Instant</span>
                    <div class="stat-label">Results</div>
                </div>
            </div>
            
            <!-- Medical Disclaimer Banner -->
			<div class="medical-disclaimer-banner" style="max-width: 900px; margin: 25px auto 0; padding: 18px 25px; background: rgba(239, 68, 68, 0.15); border: 2px solid rgba(239, 68, 68, 0.4); border-radius: 16px; backdrop-filter: blur(10px); position: relative;">
				<span style="position: absolute; top: 12px; right: 15px; font-size: 1.8rem;">⚠️</span>
				<p style="margin: 0; font-weight: 600; color: rgba(255, 255, 255, 0.95); font-size: 0.95rem; line-height: 1.6; padding-right: 50px;">
					<strong style="font-size: 1.05rem;">⚕️ IMPORTANT MEDICAL DISCLAIMER</strong><br><br>
					<strong>These calculators are for informational and educational purposes only.</strong> They do not constitute medical advice, diagnosis, or treatment. Always consult qualified healthcare professionals for medical decisions and health concerns.
				</p>
			</div>
        </div>
    </header>

<!-- Navigation Banner -->
<div style="background: linear-gradient(180deg, rgba(20, 184, 166, 0.85) 0%, rgba(13, 148, 136, 0.9) 50%, rgba(15, 118, 110, 0.85) 100%); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 18px 80px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); margin-bottom: 30px;">
    <a href="https://rapidpercent.com/basic-calculators.html" style="color: white; text-decoration: none; font-family: 'Poppins', 'Inter', sans-serif; font-size: 1.05rem; font-weight: 700; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: all 0.3s ease;" onmouseover="this.style.color='#fbbf24'; this.style.transform='scale(1.05)';" onmouseout="this.style.color='white'; this.style.transform='scale(1)';">Basic Calculators Suite</a>
    <a href="https://rapidpercent.com/" style="color: white; text-decoration: none; font-family: 'Poppins', 'Inter', sans-serif; font-size: 1.05rem; font-weight: 700; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: all 0.3s ease;" onmouseover="this.style.color='#fbbf24'; this.style.transform='scale(1.05)';" onmouseout="this.style.color='white'; this.style.transform='scale(1)';">Percentage Calculators Suite</a>
    <a href="https://rapidpercent.com/financial-calculators.html" style="color: white; text-decoration: none; font-family: 'Poppins', 'Inter', sans-serif; font-size: 1.05rem; font-weight: 700; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: all 0.3s ease;" onmouseover="this.style.color='#fbbf24'; this.style.transform='scale(1.05)';" onmouseout="this.style.color='white'; this.style.transform='scale(1)';">Financial Calculators Suite</a>
</div>

    <div class="container">
        <!-- Banner 1 - AADS Horizontal -->
        <div class="aads-banner-container">
            <div id="frame" style="width: 728px;margin: auto;z-index: 99998;height: auto">
                <iframe data-aa='2415317' src='//ad.a-ads.com/2415317/?size=728x90'
                    style='border:0; padding:0; width:728px; height:90px; overflow:hidden;display: block;margin: auto' title="Advertisement" loading="lazy"></iframe>
            </div>
        </div>
        
        <section class="calculator-section">
            <h2 class="section-title">Comprehensive Health Calculator Suite</h2>
            <p class="section-description">
                Professional medical-grade calculators using validated scientific formulas. Track your health metrics with precision tools trusted by healthcare professionals worldwide. All calculators provide instant, accurate results with detailed interpretations.
            </p>
            
            <div class="calculator-list">
                <span>BMI Calculator</span>
                <span>TDEE/Calorie</span>
                <span>Pregnancy Due Date</span>
                <span>Ovulation Tracker</span>
                <span>Water Intake</span>
                <span>Body Fat %</span>
                <span>Ideal Weight</span>
                <span>BMR Calculator</span>
                <span>Macro Calculator</span>
                <span>Heart Rate Zones</span>
                <span>Blood Pressure</span>
                <span>Pregnancy Weight</span>
            </div>
            
            <div class="calc-grid">
                <!-- Calculator 1: BMI Calculator -->
                <div class="calc-card" id="bmi-calc">
                    <button class="clear-btn" onclick="clearCalculator('bmi-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>BMI Calculator</h3>
                    <span class="info-icon" onclick="openModal('modal1')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="unit-toggle">
                        <label for="bmi-system">Measurement System:</label>
                        <select id="bmi-system" onchange="toggleBMIUnits()" aria-label="Select measurement system">
                            <option value="metric">Metric (kg/cm)</option>
                            <option value="imperial">Imperial (lbs/in)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="bmi-weight">
                            <span class="label-icon">⚖️</span>
                            <span id="bmi-weight-label">Weight (kg):</span>
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Enter your current body weight</span>
                            </span>
                        </label>
                        <div class="input-wrapper">
                            <input type="number" id="bmi-weight" placeholder="e.g., 70" step="0.1" min="1" max="500" oninput="calculateBMI()" aria-required="true">
                        </div>
                        <div class="error-message" id="error-bmi-weight">Please enter a valid weight (1-500)</div>
                        <div class="success-message" id="success-bmi-weight">✓ Valid weight entered</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="bmi-height">
                            <span class="label-icon">📏</span>
                            <span id="bmi-height-label">Height (cm):</span>
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Enter your height without shoes</span>
                            </span>
                        </label>
                        <div class="input-wrapper">
                            <input type="number" id="bmi-height" placeholder="e.g., 170" step="0.1" min="50" max="300" oninput="calculateBMI()" aria-required="true">
                        </div>
                        <div class="error-message" id="error-bmi-height">Please enter a valid height (50-300)</div>
                        <div class="success-message" id="success-bmi-height">✓ Valid height entered</div>
                    </div>
                    
                    <div class="result" id="result-bmi">Enter your measurements above</div>
                    <div class="progress-indicator" id="bmi-progress">
                        <div class="progress-bar" id="bmi-progress-bar"></div>
                    </div>
                </div>

                <!-- Calculator 2: Calorie Calculator (TDEE) -->
                <div class="calc-card" id="calorie-calc">
                    <button class="clear-btn" onclick="clearCalculator('calorie-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Daily Calorie Needs (TDEE)</h3>
                    <span class="info-icon" onclick="openModal('modal2')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="cal-gender">
                            <span class="label-icon">👤</span>
                            Gender:
                        </label>
                        <select id="cal-gender" onchange="calculateCalories()" aria-label="Select gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="cal-age">
                            <span class="label-icon">🎂</span>
                            Age (years):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Age affects metabolic rate</span>
                            </span>
                        </label>
                        <input type="number" id="cal-age" placeholder="e.g., 30" min="15" max="120" oninput="calculateCalories()" aria-required="true">
                        <div class="error-message" id="error-cal-age">Age must be between 15-120 years</div>
                        <div class="success-message" id="success-cal-age">✓ Valid age</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="cal-weight">
                            <span class="label-icon">⚖️</span>
                            Weight (kg):
                        </label>
                        <input type="number" id="cal-weight" placeholder="e.g., 70" step="0.1" min="30" max="300" oninput="calculateCalories()" aria-required="true">
                        <div class="error-message" id="error-cal-weight">Weight must be between 30-300 kg</div>
                        <div class="success-message" id="success-cal-weight">✓ Valid weight</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="cal-height">
                            <span class="label-icon">📏</span>
                            Height (cm):
                        </label>
                        <input type="number" id="cal-height" placeholder="e.g., 170" step="0.1" min="100" max="250" oninput="calculateCalories()" aria-required="true">
                        <div class="error-message" id="error-cal-height">Height must be between 100-250 cm</div>
                        <div class="success-message" id="success-cal-height">✓ Valid height</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="cal-activity">
                            <span class="label-icon">🏃</span>
                            Activity Level:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Choose your typical daily activity</span>
                            </span>
                        </label>
                        <select id="cal-activity" onchange="calculateCalories()" aria-label="Select activity level">
                            <option value="1.2">Sedentary (little/no exercise)</option>
                            <option value="1.375">Light (exercise 1-3 days/week)</option>
                            <option value="1.55">Moderate (exercise 3-5 days/week)</option>
                            <option value="1.725">Active (exercise 6-7 days/week)</option>
                            <option value="1.9">Very Active (intense daily exercise + physical job)</option>
                        </select>
                    </div>
                    
                    <div class="result" id="result-calories">Enter your information above</div>
                </div>

                <!-- Calculator 3: Pregnancy Due Date -->
                <div class="calc-card" id="pregnancy-calc">
                    <button class="clear-btn" onclick="clearCalculator('pregnancy-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Pregnancy Due Date</h3>
                    <span class="info-icon" onclick="openModal('modal3')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="lmp-date">
                            <span class="label-icon">📅</span>
                            Last Menstrual Period (LMP):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">First day of your last period</span>
                            </span>
                        </label>
                        <input type="date" id="lmp-date" onchange="calculateDueDate()" aria-required="true">
                        <div class="error-message" id="error-lmp-date">Please select a valid past date</div>
                        <div class="success-message" id="success-lmp-date">✓ Date selected</div>
                    </div>
                    
                    <div class="result" id="result-duedate">Select your LMP date above</div>
                </div>

                <!-- Calculator 4: Ovulation Calculator -->
                <div class="calc-card" id="ovulation-calc">
                    <button class="clear-btn" onclick="clearCalculator('ovulation-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Ovulation Calculator</h3>
                    <span class="info-icon" onclick="openModal('modal4')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="cycle-start">
                            <span class="label-icon">📅</span>
                            First Day of Last Period:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Start date of your menstrual cycle</span>
                            </span>
                        </label>
                        <input type="date" id="cycle-start" onchange="calculateOvulation()" aria-required="true">
                        <div class="error-message" id="error-cycle-start">Please select a valid date</div>
                        <div class="success-message" id="success-cycle-start">✓ Date selected</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="cycle-length">
                            <span class="label-icon">🔄</span>
                            Average Cycle Length (days):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Typical length of your menstrual cycle</span>
                            </span>
                        </label>
                        <input type="number" id="cycle-length" placeholder="e.g., 28" min="21" max="45" value="28" oninput="calculateOvulation()" aria-required="true">
                        <div class="error-message" id="error-cycle-length">Cycle length must be 21-45 days</div>
                        <div class="success-message" id="success-cycle-length">✓ Valid cycle length</div>
                    </div>
                    
                    <div class="result" id="result-ovulation">Enter your cycle information above</div>
                </div>

                <!-- Calculator 5: Water Intake Calculator -->
                <div class="calc-card" id="water-calc">
                    <button class="clear-btn" onclick="clearCalculator('water-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Daily Water Intake</h3>
                    <span class="info-icon" onclick="openModal('modal5')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="water-weight">
                            <span class="label-icon">⚖️</span>
                            Weight (kg):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Your body weight affects hydration needs</span>
                            </span>
                        </label>
                        <input type="number" id="water-weight" placeholder="e.g., 70" step="0.1" min="30" max="300" oninput="calculateWater()" aria-required="true">
                        <div class="error-message" id="error-water-weight">Weight must be between 30-300 kg</div>
                        <div class="success-message" id="success-water-weight">✓ Valid weight</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="water-activity">
                            <span class="label-icon">🏃</span>
                            Activity Level:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Exercise increases water needs</span>
                            </span>
                        </label>
                        <select id="water-activity" onchange="calculateWater()" aria-label="Select activity level">
                            <option value="0">Sedentary (no exercise)</option>
                            <option value="0.5">Moderate (30 min exercise/day)</option>
                            <option value="1">Active (60+ min exercise/day)</option>
                            <option value="1.5">Very Active (intense training)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="water-climate">
                            <span class="label-icon">🌡️</span>
                            Climate:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Hot weather increases hydration needs</span>
                            </span>
                        </label>
                        <select id="water-climate" onchange="calculateWater()" aria-label="Select climate">
                            <option value="0">Normal/Cool Climate</option>
                            <option value="0.5">Hot/Humid Climate</option>
                            <option value="1">Very Hot/Desert Climate</option>
                        </select>
                    </div>
                    
                    <div class="result" id="result-water">Enter your information above</div>
                </div>

                <!-- Calculator 6: Body Fat Percentage -->
                <div class="calc-card" id="bodyfat-calc">
                    <button class="clear-btn" onclick="clearCalculator('bodyfat-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Body Fat Percentage</h3>
                    <span class="info-icon" onclick="openModal('modal6')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="bf-gender">
                            <span class="label-icon">👤</span>
                            Gender:
                        </label>
                        <select id="bf-gender" onchange="calculateBodyFat()" aria-label="Select gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="bf-age">
                            <span class="label-icon">🎂</span>
                            Age (years):
                        </label>
                        <input type="number" id="bf-age" placeholder="e.g., 30" min="18" max="100" oninput="calculateBodyFat()" aria-required="true">
                        <div class="error-message" id="error-bf-age">Age must be between 18-100 years</div>
                        <div class="success-message" id="success-bf-age">✓ Valid age</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="bf-weight">
                            <span class="label-icon">⚖️</span>
                            Weight (kg):
                        </label>
                        <input type="number" id="bf-weight" placeholder="e.g., 70" step="0.1" min="30" max="300" oninput="calculateBodyFat()" aria-required="true">
                        <div class="error-message" id="error-bf-weight">Weight must be between 30-300 kg</div>
                        <div class="success-message" id="success-bf-weight">✓ Valid weight</div>
                    </div>
                    
                    <div class="input-group">
						<label for="bf-height">
							<span class="label-icon">📏</span>
							Height (cm):
						</label>
						<input type="number" id="bf-height" placeholder="e.g., 170" step="0.1" min="100" max="250" oninput="calculateBodyFat()" aria-required="true">
						<div class="error-message" id="error-bf-height">Height must be between 100-250 cm</div>
						<div class="success-message" id="success-bf-height">✓ Valid height</div>
					</div>

					<!-- NUEVO: Circunferencias para US Navy Method REAL -->
					<div class="input-group">
						<label for="bf-neck">
							<span class="label-icon">📐</span>
							Neck Circumference (cm):
							<span class="tooltip">ℹ️
								<span class="tooltiptext">Measure at smallest point below Adam's apple</span>
							</span>
						</label>
						<input type="number" id="bf-neck" placeholder="e.g., 37" step="0.1" min="20" max="60" oninput="calculateBodyFat()" aria-required="true">
						<div class="error-message" id="error-bf-neck">Neck must be between 20-60 cm</div>
						<div class="success-message" id="success-bf-neck">✓ Valid neck measurement</div>
					</div>

					<div class="input-group">
						<label for="bf-waist">
							<span class="label-icon">📐</span>
							Waist Circumference (cm):
							<span class="tooltip">ℹ️
								<span class="tooltiptext">Measure at navel level, relaxed</span>
							</span>
						</label>
						<input type="number" id="bf-waist" placeholder="e.g., 85" step="0.1" min="40" max="200" oninput="calculateBodyFat()" aria-required="true">
						<div class="error-message" id="error-bf-waist">Waist must be between 40-200 cm</div>
						<div class="success-message" id="success-bf-waist">✓ Valid waist measurement</div>
					</div>

					<div class="input-group" id="bf-hip-group" style="display: none;">
						<label for="bf-hip">
							<span class="label-icon">📐</span>
							Hip Circumference (cm):
							<span class="tooltip">ℹ️
								<span class="tooltiptext">Women only: Measure at widest point</span>
							</span>
						</label>
						<input type="number" id="bf-hip" placeholder="e.g., 95" step="0.1" min="50" max="200" oninput="calculateBodyFat()">
						<div class="error-message" id="error-bf-hip">Hip must be between 50-200 cm</div>
						<div class="success-message" id="success-bf-hip">✓ Valid hip measurement</div>
					</div>

					<div class="result" id="result-bodyfat">Enter your measurements above</div>
                </div>

                <!-- Calculator 7: Ideal Weight Calculator -->
                <div class="calc-card" id="idealweight-calc">
                    <button class="clear-btn" onclick="clearCalculator('idealweight-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Ideal Weight Calculator</h3>
                    <span class="info-icon" onclick="openModal('modal7')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="iw-gender">
                            <span class="label-icon">👤</span>
                            Gender:
                        </label>
                        <select id="iw-gender" onchange="calculateIdealWeight()" aria-label="Select gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="iw-height">
                            <span class="label-icon">📏</span>
                            Height (cm):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Height is primary factor in ideal weight</span>
                            </span>
                        </label>
                        <input type="number" id="iw-height" placeholder="e.g., 170" step="0.1" min="100" max="250" oninput="calculateIdealWeight()" aria-required="true">
                        <div class="error-message" id="error-iw-height">Height must be between 100-250 cm</div>
                        <div class="success-message" id="success-iw-height">✓ Valid height</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="iw-frame">
                            <span class="label-icon">🦴</span>
                            Body Frame:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Frame size affects ideal weight range</span>
                            </span>
                        </label>
                        <select id="iw-frame" onchange="calculateIdealWeight()" aria-label="Select body frame">
                            <option value="small">Small Frame</option>
                            <option value="medium" selected>Medium Frame</option>
                            <option value="large">Large Frame</option>
                        </select>
                    </div>
                    
                    <div class="result" id="result-idealweight">Enter your height above</div>
                </div>

                <!-- Calculator 8: BMR Calculator -->
                <div class="calc-card" id="bmr-calc">
                    <button class="clear-btn" onclick="clearCalculator('bmr-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>BMR Calculator</h3>
                    <span class="info-icon" onclick="openModal('modal8')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="bmr-gender">
                            <span class="label-icon">👤</span>
                            Gender:
                        </label>
                        <select id="bmr-gender" onchange="calculateBMR()" aria-label="Select gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="bmr-age">
                            <span class="label-icon">🎂</span>
                            Age (years):
                        </label>
                        <input type="number" id="bmr-age" placeholder="e.g., 30" min="15" max="120" oninput="calculateBMR()" aria-required="true">
                        <div class="error-message" id="error-bmr-age">Age must be between 15-120 years</div>
                        <div class="success-message" id="success-bmr-age">✓ Valid age</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="bmr-weight">
                            <span class="label-icon">⚖️</span>
                            Weight (kg):
                        </label>
                        <input type="number" id="bmr-weight" placeholder="e.g., 70" step="0.1" min="30" max="300" oninput="calculateBMR()" aria-required="true">
                        <div class="error-message" id="error-bmr-weight">Weight must be between 30-300 kg</div>
                        <div class="success-message" id="success-bmr-weight">✓ Valid weight</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="bmr-height">
                            <span class="label-icon">📏</span>
                            Height (cm):
                        </label>
                        <input type="number" id="bmr-height" placeholder="e.g., 170" step="0.1" min="100" max="250" oninput="calculateBMR()" aria-required="true">
                        <div class="error-message" id="error-bmr-height">Height must be between 100-250 cm</div>
                        <div class="success-message" id="success-bmr-height">✓ Valid height</div>
                    </div>
                    
                    <div class="result" id="result-bmr">Enter your information above</div>
                </div>

                <!-- Calculator 9: Macro Calculator -->
                <div class="calc-card" id="macro-calc">
                    <button class="clear-btn" onclick="clearCalculator('macro-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Macronutrient Calculator</h3>
                    <span class="info-icon" onclick="openModal('modal9')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="macro-calories">
                            <span class="label-icon">🔥</span>
                            Daily Calories:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Your target daily calorie intake</span>
                            </span>
                        </label>
                        <input type="number" id="macro-calories" placeholder="e.g., 2000" min="1000" max="5000" oninput="calculateMacros()" aria-required="true">
                        <div class="error-message" id="error-macro-calories">Calories must be between 1000-5000</div>
                        <div class="success-message" id="success-macro-calories">✓ Valid calorie target</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="macro-goal">
                            <span class="label-icon">🎯</span>
                            Dietary Goal:
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Different goals need different macro ratios</span>
                            </span>
                        </label>
                        <select id="macro-goal" onchange="calculateMacros()" aria-label="Select dietary goal">
                            <option value="balanced">Balanced (30/35/35) - General Health</option>
                            <option value="lowcarb">Low Carb (40/20/40) - Fat Loss</option>
                            <option value="highprotein">High Protein (40/30/30) - Muscle Building</option>
                            <option value="keto">Keto (25/5/70) - Ketogenic Diet</option>
                            <option value="athlete">Athlete (30/50/20) - Endurance Performance</option>
                        </select>
                    </div>
                    
                    <div class="result" id="result-macros">Enter your calorie target above</div>
                </div>

                <!-- Calculator 10: Heart Rate Zones -->
                <div class="calc-card" id="heartrate-calc">
                    <button class="clear-btn" onclick="clearCalculator('heartrate-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Heart Rate Zones</h3>
                    <span class="info-icon" onclick="openModal('modal10')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="hr-age">
                            <span class="label-icon">🎂</span>
                            Age (years):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Age determines maximum heart rate</span>
                            </span>
                        </label>
                        <input type="number" id="hr-age" placeholder="e.g., 30" min="15" max="100" oninput="calculateHeartRate()" aria-required="true">
                        <div class="error-message" id="error-hr-age">Age must be between 15-100 years</div>
                        <div class="success-message" id="success-hr-age">✓ Valid age</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="hr-resting">
                            <span class="label-icon">💓</span>
                            Resting Heart Rate (optional):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">For more accurate Karvonen calculation</span>
                            </span>
                        </label>
                        <input type="number" id="hr-resting" placeholder="e.g., 60" min="30" max="100" oninput="calculateHeartRate()">
                        <div class="error-message" id="error-hr-resting">Resting HR must be 30-100 bpm</div>
                        <div class="success-message" id="success-hr-resting">✓ Karvonen method will be used</div>
                    </div>
                    
                    <div class="result" id="result-heartrate">Enter your age above</div>
                </div>

                <!-- Calculator 11: Blood Pressure Tracker -->
                <div class="calc-card" id="bp-calc">
                    <button class="clear-btn" onclick="clearCalculator('bp-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Blood Pressure Tracker</h3>
                    <span class="info-icon" onclick="openModal('modal11')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="bp-systolic">
                            <span class="label-icon">📊</span>
                            Systolic (top number):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Pressure during heartbeat</span>
                            </span>
                        </label>
                        <input type="number" id="bp-systolic" placeholder="e.g., 120" min="70" max="200" oninput="calculateBloodPressure()" aria-required="true">
                        <div class="error-message" id="error-bp-systolic">Systolic must be between 70-200 mmHg</div>
                        <div class="success-message" id="success-bp-systolic">✓ Valid systolic pressure</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="bp-diastolic">
                            <span class="label-icon">📉</span>
                            Diastolic (bottom number):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Pressure between heartbeats</span>
                            </span>
                        </label>
                        <input type="number" id="bp-diastolic" placeholder="e.g., 80" min="40" max="130" oninput="calculateBloodPressure()" aria-required="true">
                        <div class="error-message" id="error-bp-diastolic">Diastolic must be between 40-130 mmHg</div>
                        <div class="success-message" id="success-bp-diastolic">✓ Valid diastolic pressure</div>
                    </div>
                    
                    <div class="result" id="result-bp">Enter your blood pressure above</div>
                </div>

                <!-- Calculator 12: Pregnancy Weight Gain -->
                <div class="calc-card" id="pregweight-calc">
                    <button class="clear-btn" onclick="clearCalculator('pregweight-calc')" title="Clear all fields" aria-label="Clear calculator">✕</button>
                    <h3>Pregnancy Weight Gain</h3>
                    <span class="info-icon" onclick="openModal('modal12')" title="Learn how to use this calculator" aria-label="Information" role="button" tabindex="0">💡</span>
                    
                    <div class="input-group">
                        <label for="pw-height">
                            <span class="label-icon">📏</span>
                            Height (cm):
                        </label>
                        <input type="number" id="pw-height" placeholder="e.g., 165" step="0.1" min="100" max="220" oninput="calculatePregWeight()" aria-required="true">
                        <div class="error-message" id="error-pw-height">Height must be between 100-220 cm</div>
                        <div class="success-message" id="success-pw-height">✓ Valid height</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="pw-preweight">
                            <span class="label-icon">⚖️</span>
                            Pre-Pregnancy Weight (kg):
                            <span class="tooltip">ⓘ
                                <span class="tooltiptext">Weight before pregnancy</span>
                            </span>
                        </label>
                        <input type="number" id="pw-preweight" placeholder="e.g., 60" step="0.1" min="35" max="200" oninput="calculatePregWeight()" aria-required="true">
                        <div class="error-message" id="error-pw-preweight">Weight must be between 35-200 kg</div>
                        <div class="success-message" id="success-pw-preweight">✓ Valid pre-pregnancy weight</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="pw-twins">
                            <span class="label-icon">👶</span>
                            Pregnancy Type:
                        </label>
                        <select id="pw-twins" onchange="calculatePregWeight()" aria-label="Select pregnancy type">
                            <option value="single">Single Baby</option>
                            <option value="twins">Twins</option>
                        </select>
                    </div>
                    
                    <div class="result" id="result-pregweight">Enter your information above</div>
                </div>
            </div>
        </section>

        <!-- Banner 2 - AADS Medium Rectangle -->
        <div style="background: rgba(255, 255, 255, 0.97); backdrop-filter: blur(15px); border-radius: 28px; padding: 30px; box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.12); border: 1px solid rgba(45, 212, 191, 0.15); margin: 50px auto; max-width: 370px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center;">
            <div style="position: absolute; top: 0; left: 0; right: 0; height: 5px; background: linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%); border-radius: 28px 28px 0 0;"></div>
            <iframe data-aa='2415316' src='//ad.a-ads.com/2415316/?size=300x250' style='border:0; padding:0; width:300px; height:250px; overflow:hidden; display:block; border-radius:16px;' title="Advertisement" loading="lazy"></iframe>
        </div>

        <!-- Information Section -->
        <section class="info-section">
            <h2>Comprehensive Health Calculator Guide</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <h4 data-icon="⚕️">BMI Calculator - Body Mass Index</h4>
                    <p><strong>Formula:</strong> weight(kg) / [height(m)]². <strong>WHO Standards:</strong> Underweight <18.5, Normal 18.5-24.9, Overweight 25-29.9, Obese I 30-34.9, Obese II 35-39.9, Obese III ≥40. Widely used screening tool but doesn't account for muscle mass or body composition. Not applicable for athletes, pregnant women, elderly, or children under 18.</p>
                </div>
                
                <div class="info-card">
                    <h4 data-icon="🔥">TDEE & Calorie Calculator</h4>
                    <p><strong>Mifflin-St Jeor Equation (most accurate):</strong> Men: (10×weight) + (6.25×height) - (5×age) + 5. Women: (10×weight) + (6.25×height) - (5×age) - 161. Multiplied by activity factor (1.2-1.9) for Total Daily Energy Expenditure. Create 300-500 calorie deficit for weight loss, 300-500 surplus for weight gain. Represents calories burned including basal metabolism and daily activities.</p>
                </div>
                
                <div class="info-card">
                    <h4 data-icon="🤰">Pregnancy Due Date Calculator</h4>
                    <p><strong>Naegele's Rule:</strong> LMP + 280 days (40 weeks). Standard method used by obstetricians worldwide since 1812. <strong>Trimester Breakdown:</strong> First (weeks 1-12), Second (weeks 13-26), Third (weeks 27-40+). Only ~5% deliver on exact due date. Normal delivery: 37-42 weeks. Full-term: 39-40 weeks. Early term: 37-38 weeks. Late term: 41 weeks. Post-term: 42+ weeks.</p>
                </div>
                
                <div class="info-card">
                    <h4 data-icon="🌸">Ovulation & Fertility Calculator</h4>
                    <p><strong>Standard Calculation:</strong> Ovulation = Cycle Day (Cycle Length - 14). <strong>Fertile Window:</strong> 5 days before ovulation + ovulation day = 6 days total. Sperm survives up to 5 days, egg survives 12-24 hours. <strong>Most fertile:</strong> 2-3 days before ovulation. Best for regular cycles (21-35 days). Irregular cycles require ovulation predictor kits or basal body temperature tracking.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="💧">Daily Water Intake Calculator</h4>
                    <p><strong>Formula:</strong> 30-35ml per kg body weight, adjusted for activity and climate. <strong>Baseline:</strong> ~2.7L women, ~3.7L men (including food sources). <strong>Add 500ml for:</strong> 30 min moderate exercise, hot/humid climate, illness/fever. <strong>Increase if:</strong> Breastfeeding (+700ml), high altitude, high fiber diet. Signs of dehydration: dark urine, fatigue, dizziness. Proper hydration supports metabolism, digestion, temperature regulation.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="📊">Body Fat Percentage Calculator</h4>
                    <p><strong>US Navy Method:</strong> Based on BMI, age, and circumference measurements. <strong>Healthy Ranges - Men:</strong> Essential 2-5%, Athletes 6-13%, Fitness 14-17%, Average 18-24%, Obese 25%+. <strong>Women:</strong> Essential 10-13%, Athletes 14-20%, Fitness 21-24%, Average 25-31%, Obese 32%+. More accurate than BMI for assessing health. High body fat increases cardiovascular disease, diabetes, and joint problems risk.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="⚖️">Ideal Weight Calculator</h4>
                    <p><strong>Multiple Medical Formulas:</strong> <strong>Devine:</strong> Men: 50kg + 2.3kg per inch >5ft. Women: 45.5kg + 2.3kg per inch >5ft. <strong>Robinson:</strong> Men: 52kg + 1.9kg/inch. Women: 49kg + 1.7kg/inch. <strong>Miller:</strong> Men: 56.2kg + 1.41kg/inch. Women: 53.1kg + 1.36kg/inch. Provides range accounting for frame size. Small frame: -10%, Large frame: +10% from median.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="🔬">BMR - Basal Metabolic Rate</h4>
                    <p><strong>Definition:</strong> Calories burned at complete rest for vital functions (breathing, circulation, cell production). Represents 60-75% of total daily energy expenditure. <strong>Mifflin-St Jeor (most accurate):</strong> Same formula as TDEE but without activity multiplier. <strong>Factors affecting BMR:</strong> Age (decreases ~2% per decade after 30), gender (men higher), muscle mass (increases BMR), genetics, hormones (thyroid).</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="🥗">Macronutrient Distribution Calculator</h4>
                    <p><strong>Caloric Values:</strong> Protein 4 cal/g, Carbs 4 cal/g, Fat 9 cal/g. <strong>Balanced (30/35/35):</strong> General health maintenance. <strong>Low Carb (40/20/40):</strong> Fat loss, blood sugar control. <strong>High Protein (40/30/30):</strong> Muscle building, satiety. <strong>Keto (25/5/70):</strong> Ketosis, epilepsy management. <strong>Athlete (30/50/20):</strong> Endurance performance. Adjust based on goals, activity level, metabolic health.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="❤️">Heart Rate Training Zones</h4>
                    <p><strong>Max HR Formula:</strong> 220 - age. <strong>Karvonen Method (with resting HR):</strong> Target = [(Max HR - Resting HR) × %Intensity] + Resting HR. <strong>Zone 1 (50-60%):</strong> Recovery, warm-up. <strong>Zone 2 (60-70%):</strong> Fat burning, base endurance. <strong>Zone 3 (70-80%):</strong> Aerobic fitness. <strong>Zone 4 (80-90%):</strong> Anaerobic threshold, lactate tolerance. <strong>Zone 5 (90-100%):</strong> VO2 max, peak performance.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="🩺">Blood Pressure Tracker</h4>
                    <p><strong>American Heart Association Guidelines:</strong> <strong>Normal:</strong> <120/80 mmHg. <strong>Elevated:</strong> 120-129/<80. <strong>Stage 1 Hypertension:</strong> 130-139/80-89. <strong>Stage 2 Hypertension:</strong> ≥140/90. <strong>Hypertensive Crisis:</strong> >180/120 (seek immediate care). <strong>Hypotension:</strong> <90/60. Regular monitoring prevents heart disease, stroke, kidney damage. Measure at same time daily, after 5min rest, feet flat on floor.</p>
                </div>

                <div class="info-card">
                    <h4 data-icon="👶">Pregnancy Weight Gain Guide</h4>
                    <p><strong>IOM (Institute of Medicine) Guidelines by Pre-pregnancy BMI:</strong> <strong>Underweight (<18.5):</strong> 28-40 lbs (12.7-18kg). <strong>Normal (18.5-24.9):</strong> 25-35 lbs (11.3-15.9kg). <strong>Overweight (25-29.9):</strong> 15-25 lbs (6.8-11.3kg). <strong>Obese (≥30):</strong> 11-20 lbs (5-9kg). <strong>Twins:</strong> Add 10-15 lbs. <strong>Weight Gain Pattern:</strong> 1st trimester: 1-5 lbs total. 2nd/3rd trimesters: ~1 lb/week. Adequate gain reduces preterm birth, low birth weight risks.</p>
                </div>
            </div>

            <div class="highlight-box">
                <h3>🏥 Why Choose Our Professional Health Calculator Suite?</h3>
                <p>Our comprehensive health calculator platform delivers medical-grade accuracy using scientifically validated formulas from leading global health organizations. Each calculator implements peer-reviewed equations used by healthcare professionals worldwide:</p>
                <br>
                <p><strong>✓ Scientifically Validated:</strong> Mifflin-St Jeor (1990) for BMR/TDEE, Naegele's Rule (1812) for pregnancy, US Navy Method for body fat, WHO standards for BMI classification.</p>
                <br>
                <p><strong>✓ Real-Time Calculations:</strong> Instant results with detailed interpretations, health category classifications, and actionable recommendations.</p>
                <br>
                <p><strong>✓ Comprehensive Coverage:</strong> From fitness tracking (BMI, body fat, macros) to reproductive health (pregnancy, ovulation) to cardiovascular wellness (blood pressure, heart rate zones).</p>
                <br>
                <p><strong>✓ User Privacy:</strong> All calculations performed locally in your browser. No data stored, transmitted, or shared. Complete privacy guaranteed.</p>
                <br>
                <p><strong>✓ Professional Quality:</strong> Designed for accuracy and reliability. Suitable for personal health tracking, fitness planning, medical consultations, and educational purposes.</p>
                <br>
                <p>Whether you're optimizing fitness goals, monitoring pregnancy, managing weight, planning nutrition, or tracking cardiovascular health, our tools provide precise, reliable results accessible anywhere, anytime, on any device.</p>
				
				<div class="disclaimer-box">
                    <div style="position: absolute; top: -18px; right: 18px; font-size: 2.2rem; background: white; padding: 4px 12px; border-radius: 12px; border: 3px solid #ef4444;">⚠️</div>
                    <p style="font-size: 1.1rem; margin-bottom: 15px; margin-top: 0;"><strong>⚕️ IMPORTANT MEDICAL DISCLAIMER</strong></p>
                    <p style="margin-bottom: 12px;"><strong>These calculators are for informational and educational purposes only.</strong> They do not constitute medical advice, diagnosis, or treatment.</p>
                    <p style="margin-bottom: 12px;"><strong>Always consult qualified healthcare professionals for:</strong></p>
                    <ul style="list-style: none; padding-left: 0; margin: 10px 0;">
                        <li style="margin-bottom: 8px;">✓ Medical decisions and health concerns</li>
                        <li style="margin-bottom: 8px;">✓ Pregnancy care and prenatal health</li>
                        <li style="margin-bottom: 8px;">✓ Chronic condition management</li>
                        <li style="margin-bottom: 8px;">✓ Medication and treatment plans</li>
                        <li style="margin-bottom: 8px;">✓ Dietary and exercise programs</li>
                    </ul>
                    <p style="margin-top: 12px;"><strong>Note:</strong> Results are estimates based on population averages and may not reflect individual medical conditions, medications, or unique health circumstances.</p>
                    <p style="margin-top: 12px; font-weight: 700; color: #7f1d1d;">🚨 IN CASE OF MEDICAL EMERGENCY, CONTACT EMERGENCY SERVICES (911) IMMEDIATELY.</p>
                </div>
            </div>
        </section>

        <!-- Donation Section -->
        <section class="info-section">
            <div style="background: rgba(255, 255, 255, 0.97); backdrop-filter: blur(15px); border-radius: 28px; padding: 45px; text-align: center; max-width: 550px; margin: 0 auto; box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.12); border: 1px solid rgba(45, 212, 191, 0.15); position: relative; overflow: hidden;">
                <div style="position: absolute; top: 0; left: 0; right: 0; height: 5px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%); border-radius: 28px 28px 0 0;"></div>
                <h3 style="font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.6rem; font-weight: 800; margin-bottom: 22px;">Support RapidPercent ☕</h3>
                <p style="color: #475569; font-size: 1.12rem; line-height: 1.8; margin-bottom: 28px;">If our health calculators helped you track your wellness journey, consider supporting us with a small Bitcoin donation. Your contribution keeps these professional tools free and accessible for everyone worldwide!</p>
                <button onclick="document.getElementById('btcAddress').style.display = document.getElementById('btcAddress').style.display === 'none' ? 'block' : 'none'" style="background: linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%); color: white; border: none; padding: 16px 40px; border-radius: 20px; font-size: 1.15rem; font-weight: 700; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 10px 25px rgba(45, 212, 191, 0.35);" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 15px 35px rgba(45, 212, 191, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 25px rgba(45, 212, 191, 0.35)'" aria-label="Show Bitcoin donation address">💰 Donate Bitcoin</button>
                <div id="btcAddress" style="display: none; margin-top: 25px; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border: 3px solid #2dd4bf; border-radius: 16px; padding: 25px; animation: slideDown 0.4s ease;">
                    <p style="margin-bottom: 12px; font-weight: 700; color: #0f172a; font-size: 1.05rem;">Bitcoin Address:</p>
                    <code style="font-family: 'Courier New', monospace; font-size: 0.92rem; color: #0f172a; word-break: break-all; display: block; margin-bottom: 18px; background: white; padding: 12px; border-radius: 8px; border: 1px solid #cbd5e1;">bc1qxfc70kg5gtavn3mw5nypps970hqkzw6c885ya4</code>
                    <button onclick="copyBitcoinAddress(this)" style="background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%); color: white; border: none; padding: 10px 22px; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(45, 212, 191, 0.3);" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" aria-label="Copy Bitcoin address to clipboard">📋 Copy Address</button>
                    <p style="color: #059669; font-weight: 700; margin-top: 18px; font-size: 1.05rem;">🙏 Thank you for your generous support!</p>
                </div>
            </div>
        </section>
    </div>

    <!-- All Modals -->
    
    <!-- Modal 1: BMI Calculator -->
    <div id="modal1" class="info-modal" role="dialog" aria-labelledby="modal1-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal1-title">💡 BMI Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 What is Body Mass Index (BMI)?</h4>
                <p>BMI is a screening measurement that compares your weight to your height to categorize body weight status. It's a widely used international standard for assessing whether a person has a healthy body weight.</p>
                <div class="formula-box">
                    BMI = weight (kg) / [height (m)]²
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select your preferred measurement system (Metric or Imperial)</p>
                <p>2. Enter your current weight accurately</p>
                <p>3. Enter your height (without shoes for accuracy)</p>
                <p>4. Your BMI will be calculated instantly with WHO classification</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Person: 70 kg weight, 170 cm (1.70 m) height<br>
                    BMI = 70 / (1.70)² = 70 / 2.89 = <strong>24.2</strong><br>
                    Classification: <strong>Normal Weight</strong><br><br>
                    <strong>WHO BMI Classifications:</strong><br>
                    • Underweight: < 18.5<br>
                    • Normal weight: 18.5 - 24.9<br>
                    • Overweight: 25.0 - 29.9<br>
                    • Obese Class I: 30.0 - 34.9<br>
                    • Obese Class II: 35.0 - 39.9<br>
                    • Obese Class III: ≥ 40.0
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Health Screening:</strong> Initial assessment of weight status</li>
                    <li><strong>Weight Management:</strong> Track progress over time</li>
                    <li><strong>Medical Consultations:</strong> Baseline health indicator</li>
                    <li><strong>Insurance Applications:</strong> Health risk assessment</li>
                    <li><strong>Fitness Goals:</strong> Monitor body composition changes</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Important Limitations:</strong> BMI doesn't distinguish between muscle and fat mass. Not accurate for: athletes with high muscle mass, pregnant/breastfeeding women, elderly individuals with muscle loss, children under 18, very muscular individuals. Consider body fat percentage for more accurate assessment.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal1')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 2: Calorie Calculator -->
    <div id="modal2" class="info-modal" role="dialog" aria-labelledby="modal2-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal2-title">💡 Daily Calorie Needs (TDEE) Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 What is TDEE?</h4>
                <p>Total Daily Energy Expenditure (TDEE) is the total number of calories your body burns per day, including basal metabolic rate (BMR), physical activity, digestion (thermic effect of food), and non-exercise activity thermogenesis (NEAT).</p>
                <div class="formula-box">
                    TDEE = BMR × Activity Factor<br>
                    BMR (Mifflin-St Jeor): Most accurate equation
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select your biological gender (affects metabolic rate)</p>
                <p>2. Enter your age (metabolism slows ~2% per decade after 30)</p>
                <p>3. Enter your current weight and height</p>
                <p>4. Select activity level honestly (overestimating leads to excess calories)</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Male, 30 years, 70 kg, 170 cm, Moderate activity<br><br>
                    <strong>Step 1 - Calculate BMR:</strong><br>
                    BMR = (10 × 70) + (6.25 × 170) - (5 × 30) + 5<br>
                    BMR = 700 + 1,062.5 - 150 + 5 = <strong>1,617.5 cal/day</strong><br><br>
                    <strong>Step 2 - Apply Activity Factor (1.55):</strong><br>
                    TDEE = 1,617.5 × 1.55 = <strong>2,507 calories/day</strong><br><br>
                    <strong>Weight Management:</strong><br>
                    • Weight Loss: 2,007 cal/day (-500 deficit)<br>
                    • Maintenance: 2,507 cal/day<br>
                    • Weight Gain: 3,007 cal/day (+500 surplus)
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Weight Loss:</strong> Create 300-500 calorie deficit (lose 0.5-1 lb/week)</li>
                    <li><strong>Weight Gain:</strong> Create 300-500 calorie surplus (gain 0.5-1 lb/week)</li>
                    <li><strong>Meal Planning:</strong> Establish daily calorie targets</li>
                    <li><strong>Nutrition Strategy:</strong> Design personalized diet plans</li>
                    <li><strong>Fitness Goals:</strong> Support muscle building or fat loss</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Important Notes:</strong> TDEE is an estimate. Individual metabolism varies ±10% from equations. Monitor progress for 2-4 weeks and adjust calories based on actual results. Consult dietitian for eating disorders or medical conditions. Extreme deficits (<1200 women, <1500 men) can harm metabolism and health.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal2')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 3: Pregnancy Due Date -->
    <div id="modal3" class="info-modal" role="dialog" aria-labelledby="modal3-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal3-title">💡 Pregnancy Due Date Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 How is due date calculated?</h4>
                <p>The calculator uses <strong>Naegele's Rule</strong>, the standard method established in 1812 and used by obstetricians worldwide. Pregnancy typically lasts 280 days (40 weeks or 10 lunar months) from the first day of the last menstrual period (LMP).</p>
                <div class="formula-box">
                    Due Date = LMP + 280 days (40 weeks)
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select the first day of your last menstrual period (LMP) from the date picker</p>
                <p>2. The calculator instantly provides:</p>
                <ul>
                    <li>Estimated due date</li>
                    <li>Current week and day of pregnancy</li>
                    <li>Current trimester</li>
                    <li>Days until due date</li>
                </ul>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    LMP Date: January 1, 2024<br>
                    Due Date: October 8, 2024 (280 days later)<br><br>
                    <strong>Pregnancy Stages:</strong><br>
                    • First Trimester: Weeks 1-12 (Organ development)<br>
                    • Second Trimester: Weeks 13-26 (Growth acceleration)<br>
                    • Third Trimester: Weeks 27-40+ (Maturation & preparation)<br><br>
                    <strong>Important Timeline:</strong><br>
                    • Viable: 24+ weeks (survival possible with NICU)<br>
                    • Preterm: 37 weeks (increased risks)<br>
                    • Early Term: 37-38 weeks<br>
                    • Full Term: 39-40 weeks (optimal outcomes)<br>
                    • Late Term: 41 weeks<br>
                    • Post-Term: 42+ weeks (induction considered)
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Pregnancy Planning:</strong> Know your estimated delivery date</li>
                    <li><strong>Prenatal Care:</strong> Schedule appointments at correct weeks</li>
                    <li><strong>Work Planning:</strong> Plan maternity leave timing</li>
                    <li><strong>Baby Preparation:</strong> Organize nursery, supplies, classes</li>
                    <li><strong>Milestone Tracking:</strong> Monitor fetal development stages</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Accuracy Note:</strong> Only ~5% of babies arrive on exact due date. Most deliver within 2 weeks before or after. First babies often arrive after due date. Multiple pregnancies typically deliver earlier. Ultrasound dating (especially first trimester) is more accurate than LMP method. Always follow your healthcare provider's guidance for delivery timing.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal3')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 4: Ovulation Calculator -->
    <div id="modal4" class="info-modal" role="dialog" aria-labelledby="modal4-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal4-title">💡 Ovulation & Fertility Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Understanding ovulation and fertility</h4>
                <p>Ovulation is the release of a mature egg from the ovary, typically occurring 14 days before the next period starts. The fertile window is the timeframe when pregnancy is possible - it includes 5 days before ovulation plus ovulation day itself (6 days total).</p>
                <div class="formula-box">
                    Ovulation Day = Cycle Length - 14 days<br>
                    Fertile Window = 5 days before + ovulation day
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Enter the first day of your last menstrual period</p>
                <p>2. Enter your average cycle length (count from day 1 of period to day before next period starts)</p>
                <p>3. Calculator provides ovulation date, fertile window, and next period prediction</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Last Period Started: January 1, 2024<br>
                    Average Cycle Length: 28 days<br><br>
                    <strong>Results:</strong><br>
                    • Ovulation Day: January 15 (Day 14 of cycle)<br>
                    • Fertile Window: January 10-15<br>
                    • Most Fertile: January 13-15<br>
                    • Next Period: January 29<br><br>
                    <strong>Conception Science:</strong><br>
                    • Sperm can survive up to 5 days in reproductive tract<br>
                    • Egg survives only 12-24 hours after release<br>
                    • Highest pregnancy chance: 2-3 days before ovulation<br>
                    • Pregnancy possible from intercourse 5 days before through ovulation day
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Conception Planning:</strong> Identify best days for intercourse</li>
                    <li><strong>Natural Family Planning:</strong> Fertility awareness method</li>
                    <li><strong>Cycle Understanding:</strong> Learn your body's patterns</li>
                    <li><strong>Infertility Concerns:</strong> Time intercourse optimally (consult RE if not pregnant after 12 months <35 years, or 6 months ≥35 years)</li>
                    <li><strong>Ovulation Tracking:</strong> Complement with BBT, LH tests, cervical mucus observation</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Accuracy Limitations:</strong> Most accurate for regular cycles (21-35 days, variation <3 days). Less reliable for irregular cycles, PCOS, recent birth control discontinuation, breastfeeding, perimenopause, stress, illness, or weight changes. Not suitable for contraception alone. Use ovulation predictor kits or basal body temperature for confirmation. Consult reproductive endocrinologist if cycles are consistently irregular.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal4')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 5: Water Intake -->
    <div id="modal5" class="info-modal" role="dialog" aria-labelledby="modal5-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal5-title">💡 Daily Water Intake Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Why proper hydration matters</h4>
                <p>Water is essential for every bodily function: temperature regulation, nutrient transport, waste removal, joint lubrication, digestion, cognitive function, and cellular processes. Even mild dehydration (1-2% body weight loss) impairs physical and mental performance.</p>
                <div class="formula-box">
                    Base Water Need = 30-35 ml × body weight (kg)<br>
                    + Activity adjustment + Climate adjustment
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Enter your current body weight</p>
                <p>2. Select your typical daily activity level (exercise duration/intensity)</p>
                <p>3. Select your climate conditions (hot weather increases needs)</p>
                <p>4. Calculator provides daily water target in liters, cups, and fluid ounces</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Weight: 70 kg<br>
                    Activity: Moderate (30 min exercise/day)<br>
                    Climate: Normal<br><br>
                    <strong>Calculation:</strong><br>
                    Base: 70 kg × 33 ml = 2,310 ml<br>
                    + Moderate Activity: +500 ml<br>
                    + Normal Climate: +0 ml<br>
                    <strong>Total: 2.8 liters/day (11.7 cups or 95 fl oz)</strong><br><br>
                    <strong>Hydration Tips:</strong><br>
                    • Drink consistently throughout day, not all at once<br>
                    • Urine should be pale yellow (dark = dehydrated)<br>
                    • Increase 500ml for each 30 min of exercise<br>
                    • ~20% of water comes from food (fruits, vegetables)<br>
                    • Coffee/tea count toward hydration despite mild diuretic effect
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to increase water intake?</h4>
                <ul>
                    <li><strong>Exercise/Physical Activity:</strong> +400-800ml per hour of activity</li>
                    <li><strong>Hot/Humid Weather:</strong> +500-1000ml daily in summer/tropical climates</li>
                    <li><strong>High Altitude:</strong> +500ml when above 2,500m elevation</li>
                    <li><strong>Illness/Fever:</strong> Increase 200ml for each degree above 37°C (98.6°F)</li>
                    <li><strong>Pregnancy:</strong> Add 300ml daily (~2.7L total)</li>
                    <li><strong>Breastfeeding:</strong> Add 700ml daily (~3.8L total)</li>
                    <li><strong>High Fiber Diet:</strong> Extra water prevents constipation</li>
                    <li><strong>Alcohol Consumption:</strong> 1 cup water per alcoholic drink</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Dehydration Signs:</strong> Dark urine, dry mouth, fatigue, dizziness, headache, decreased urination. <strong>Overhydration Risk (rare):</strong> Drinking >1L/hour can cause hyponatremia (low sodium). Athletes in endurance events should include electrolytes. Kidney disease patients: follow doctor's fluid restrictions. If you have heart/kidney problems, consult physician before increasing water intake.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal5')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 6: Body Fat -->
    <div id="modal6" class="info-modal" role="dialog" aria-labelledby="modal6-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal6-title">💡 Body Fat Percentage Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Why body fat percentage matters</h4>
                <p>Body fat percentage is a more accurate health indicator than BMI or weight alone. It distinguishes between lean mass (muscle, bone, organs) and fat mass. Excessive body fat increases risk of cardiovascular disease, type 2 diabetes, certain cancers, and joint problems. Too little body fat impairs hormone production, immune function, and temperature regulation.</p>
                <div class="formula-box">
                    US Navy Method (simplified):<br>
                    Body Fat % = (1.20 × BMI) + (0.23 × Age) - Gender Constant
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select your biological gender (different essential fat requirements)</p>
                <p>2. Enter your age (body composition changes with age)</p>
                <p>3. Enter your weight and height</p>
                <p>4. Receive body fat percentage with health category classification</p>
                <div class="example-box">
                    <strong>Healthy Body Fat Ranges:</strong><br><br>
                    <strong>MEN:</strong><br>
                    • Essential Fat: 2-5% (minimum for physiological functions)<br>
                    • Athletes: 6-13% (competitive athletes, bodybuilders)<br>
                    • Fitness: 14-17% (fit, visible muscle definition)<br>
                    • Average/Acceptable: 18-24% (healthy, no definition)<br>
                    • Obese: 25%+ (increased health risks)<br><br>
                    <strong>WOMEN:</strong><br>
                    • Essential Fat: 10-13% (minimum for reproductive health)<br>
                    • Athletes: 14-20% (competitive athletes)<br>
                    • Fitness: 21-24% (fit, some muscle definition)<br>
                    • Average/Acceptable: 25-31% (healthy range)<br>
                    • Obese: 32%+ (increased health risks)<br><br>
                    <strong>Health Impact:</strong><br>
                    High body fat (especially visceral): ↑ CVD, diabetes, inflammation<br>
                    Low body fat: ↓ hormones, immunity, bone density, menstrual irregularities
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Fitness Tracking:</strong> Monitor body recomposition (muscle gain/fat loss)</li>
                    <li><strong>Health Assessment:</strong> More accurate than BMI for disease risk</li>
                    <li><strong>Training Progress:</strong> Verify that weight loss is from fat, not muscle</li>
                    <li><strong>Goal Setting:</strong> Set realistic body composition targets</li>
                    <li><strong>Athletic Performance:</strong> Optimize power-to-weight ratio</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Method Limitations:</strong> This calculator uses BMI-based estimation, which has ~3-5% margin of error. More accurate methods: DEXA scan (±1.5%), hydrostatic weighing (±2%), bioelectrical impedance (±3-4%), skinfold calipers (±3-5%). Results affected by hydration status, recent meals, and time of day. Very muscular or very lean individuals may get inaccurate estimates. For precise measurement, consult fitness professional with DEXA or hydrostatic weighing access.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal6')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 7: Ideal Weight -->
    <div id="modal7" class="info-modal" role="dialog" aria-labelledby="modal7-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal7-title">💡 Ideal Weight Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Understanding ideal body weight</h4>
                <p>Ideal body weight (IBW) represents a healthy weight range based on height and gender. Unlike BMI, these formulas were developed specifically for medical dosing calculations and health assessments. Multiple formulas are used because ideal weight varies based on body frame, muscle mass, and individual constitution.</p>
                <div class="formula-box">
                    Devine Formula (1974): Most widely used<br>
                    Robinson Formula (1983): Metropolitan Life data<br>
                    Miller Formula (1983): Alternative calculation
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select your biological gender</p>
                <p>2. Enter your height accurately</p>
                <p>3. Select your body frame size (small/medium/large)</p>
                <p>4. Receive ideal weight range with adjustments for frame size</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Female, 165 cm (5'5"), Medium Frame<br><br>
                    <strong>Formula Results:</strong><br>
                    • Devine Formula: 53.1 kg (117 lbs)<br>
                    • Robinson Formula: 54.7 kg (121 lbs)<br>
                    • Miller Formula: 53.9 kg (119 lbs)<br><br>
                    <strong>Ideal Weight Range: 53-55 kg (117-121 lbs)</strong><br><br>
                    <strong>Frame Size Adjustments:</strong><br>
                    • Small Frame: -10% (48-50 kg / 105-109 lbs)<br>
                    • Medium Frame: Standard (53-55 kg / 117-121 lbs)<br>
                    • Large Frame: +10% (58-60 kg / 128-133 lbs)<br><br>
                    <strong>Determining Frame Size:</strong><br>
                    Measure wrist circumference at smallest point:<br>
                    Women: <14cm=small, 14-16.5cm=medium, >16.5cm=large<br>
                    Men: <16.5cm=small, 16.5-19cm=medium, >19cm=large
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 When to use it?</h4>
                <ul>
                    <li><strong>Weight Loss Goals:</strong> Set realistic, healthy target weights</li>
                    <li><strong>Medical Reference:</strong> Drug dosing, anesthesia calculations</li>
                    <li><strong>Health Assessment:</strong> Evaluate if current weight is appropriate</li>
                    <li><strong>Fitness Planning:</strong> Determine optimal competition weight</li>
                    <li><strong>Recovery Goals:</strong> Target weight for eating disorder recovery</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Important Considerations:</strong> Ideal weight formulas don't account for muscle mass, body composition, or individual health conditions. Athletes, bodybuilders, and very muscular individuals will exceed these ranges while maintaining excellent health. Elderly may have lower muscle mass affecting interpretation. These are population averages and may not apply to all ethnicities. Focus on body composition and health markers, not just scale weight. Consult healthcare provider for personalized weight recommendations.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal7')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 8: BMR -->
    <div id="modal8" class="info-modal" role="dialog" aria-labelledby="modal8-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal8-title">💡 BMR (Basal Metabolic Rate) Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 What is Basal Metabolic Rate?</h4>
                <p>BMR is the number of calories your body burns at complete rest to maintain vital functions: breathing, circulation, cell production, nutrient processing, protein synthesis, and ion transport. It represents 60-75% of your total daily calorie expenditure and is the foundation for all nutrition planning.</p>
                <div class="formula-box">
                    Mifflin-St Jeor Equation (1990):<br>
                    Men: (10 × weight) + (6.25 × height) - (5 × age) + 5<br>
                    Women: (10 × weight) + (6.25 × height) - (5 × age) - 161
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Select your biological gender</p>
                <p>2. Enter your age</p>
                <p>3. Enter your current weight and height</p>
                <p>4. Receive your BMR (calories burned at rest) plus activity multipliers for TDEE</p>
                <div class="example-box">
                    <strong>Example Calculation:</strong><br>
                    Male, 30 years, 70 kg, 170 cm<br><br>
                    <strong>BMR Calculation:</strong><br>
                    BMR = (10 × 70) + (6.25 × 170) - (5 × 30) + 5<br>
                    BMR = 700 + 1,062.5 - 150 + 5<br>
                    <strong>BMR = 1,617.5 calories/day</strong><br><br>
                    <strong>Activity Multipliers (to get TDEE):</strong><br>
                    • Sedentary (desk job, no exercise): BMR × 1.2 = 1,941 cal<br>
                    • Light (exercise 1-3 days/week): BMR × 1.375 = 2,224 cal<br>
                    • Moderate (exercise 3-5 days/week): BMR × 1.55 = 2,507 cal<br>
                    • Active (exercise 6-7 days/week): BMR × 1.725 = 2,790 cal<br>
                    • Very Active (intense daily + physical job): BMR × 1.9 = 3,073 cal<br><br>
                    <strong>BMR Components:</strong><br>
                    • Liver: 27% of BMR<br>
                    • Brain: 19% of BMR<br>
                    • Skeletal Muscle: 18% of BMR<br>
                    • Kidneys: 10% of BMR<br>
                    • Heart: 7% of BMR<br>
                    • Other organs: 19% of BMR
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 Factors affecting BMR:</h4>
                <ul>
                    <li><strong>Age:</strong> Decreases ~2% per decade after 30 (muscle loss, hormonal changes)</li>
                    <li><strong>Gender:</strong> Men typically 5-10% higher (more muscle mass)</li>
                    <li><strong>Muscle Mass:</strong> Each pound of muscle burns 6 cal/day at rest (vs 2 cal/day for fat)</li>
                    <li><strong>Genetics:</strong> 20-30% variation in metabolic rate between individuals</li>
                    <li><strong>Thyroid Function:</strong> Hypothyroidism ↓ BMR by 20-40%, hyperthyroidism ↑ BMR</li>
                    <li><strong>Body Surface Area:</strong> Taller/larger people have higher BMR</li>
                    <li><strong>Pregnancy/Lactation:</strong> Increases BMR 20-25%</li>
                    <li><strong>Extreme Calorie Restriction:</strong> Can reduce BMR 15-30% (metabolic adaptation)</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Metabolic Adaptation:</strong> Prolonged severe calorie restriction can lower BMR significantly ("metabolic slowdown"). To preserve metabolism during weight loss: 1) Moderate deficit (500 cal/day max), 2) Adequate protein (1.6-2.2g/kg), 3) Resistance training to preserve muscle, 4) Periodic diet breaks. Extreme low-calorie diets (<1000 cal/day) can reduce BMR by 500+ calories/day and impair hormones, immune function, bone density.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal8')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 9: Macros -->
    <div id="modal9" class="info-modal" role="dialog" aria-labelledby="modal9-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal9-title">💡 Macronutrient Calculator Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Understanding macronutrients</h4>
                <p>Macronutrients ("macros") are the three primary nutrients your body needs in large quantities: Protein, Carbohydrates, and Fats. Each has specific functions and provides energy (calories). Optimal distribution depends on your goals, activity level, and metabolic health.</p>
                <div class="formula-box">
                    Caloric Values:<br>
                    Protein: 4 calories per gram<br>
                    Carbohydrates: 4 calories per gram<br>
                    Fats: 9 calories per gram
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Enter your daily calorie target (use TDEE calculator first)</p>
                <p>2. Select your dietary goal/approach</p>
                <p>3. Receive macro breakdown in grams and percentages</p>
                <div class="example-box">
                    <strong>Example: 2,000 calories/day, Balanced Diet</strong><br><br>
                    <strong>Macronutrient Distribution (30/35/35):</strong><br>
                    • Protein: 30% = 600 cal ÷ 4 = <strong>150g</strong><br>
                    • Carbs: 35% = 700 cal ÷ 4 = <strong>175g</strong><br>
                    • Fats: 35% = 700 cal ÷ 9 = <strong>78g</strong><br><br>
                    <strong>Other Macro Ratios:</strong><br><br>
                    <strong>Balanced (30/35/35):</strong> General health, maintenance<br>
                    • Best for: Average activity, weight maintenance<br><br>
                    <strong>Low Carb (40/20/40):</strong> Fat loss emphasis<br>
                    • Protein: 200g, Carbs: 100g, Fats: 89g<br>
                    • Best for: Fat loss, insulin sensitivity, PCOS<br><br>
                    <strong>High Protein (40/30/30):</strong> Muscle building<br>
                    • Protein: 200g, Carbs: 150g, Fats: 67g<br>
                    • Best for: Muscle gain, strength training, satiety<br><br>
                    <strong>Keto (25/5/70):</strong> Ketogenic diet<br>
                    • Protein: 125g, Carbs: 25g, Fats: 156g<br>
                    • Best for: Epilepsy, rapid fat loss, mental clarity<br><br>
                    <strong>Athlete (30/50/20):</strong> Endurance performance<br>
                    • Protein: 150g, Carbs: 250g, Fats: 44g<br>
                    • Best for: Endurance athletes, high-volume training
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 Macronutrient functions & sources:</h4>
                <ul>
                    <li><strong>Protein:</strong> Muscle repair/growth, enzymes, hormones, immunity. Sources: Meat, fish, eggs, dairy, legumes, tofu. Needs: 0.8-2.2g/kg body weight</li>
                    <li><strong>Carbohydrates:</strong> Primary energy, brain fuel, glycogen storage. Sources: Grains, fruits, vegetables, legumes. Needs: 45-65% calories (can be lower on low-carb diets)</li>
                    <li><strong>Fats:</strong> Hormones, cell membranes, vitamin absorption, satiety. Sources: Oils, nuts, avocados, fatty fish. Needs: 20-35% calories (essential fatty acids minimum)</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Important Guidelines:</strong> Minimum protein: 0.8g/kg (1.6-2.2g/kg for athletes/muscle building). Minimum fat: 0.3-0.5g/kg for hormone health. Very low carb (<50g/day) requires adaptation period ("keto flu"). Extreme ratios (>40% from any macro long-term) should be supervised. Individual needs vary based on: genetics, insulin sensitivity, activity type/volume, health conditions. Track progress and adjust based on results, energy levels, and performance.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal9')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 10: Heart Rate Zones -->
    <div id="modal10" class="info-modal" role="dialog" aria-labelledby="modal10-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal10-title">💡 Heart Rate Training Zones Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Understanding heart rate zones</h4>
                <p>Heart rate training zones are intensity ranges based on percentages of your maximum heart rate (MHR). Each zone targets specific physiological adaptations and energy systems. Training in different zones optimizes cardiovascular fitness, fat burning, endurance, and performance.</p>
                <div class="formula-box">
                    Maximum Heart Rate = 220 - Age<br>
                    Karvonen Method (more accurate):<br>
                    Target HR = [(Max HR - Resting HR) × %] + Resting HR
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Enter your age (determines maximum heart rate)</p>
                <p>2. Optionally enter resting heart rate for Karvonen calculation (more accurate)</p>
                <p>3. Receive all 5 training zones with specific heart rate ranges and training benefits</p>
                <div class="example-box">
                    <strong>Example: Age 30, Resting HR 60 bpm</strong><br><br>
                    <strong>Maximum Heart Rate:</strong> 220 - 30 = 190 bpm<br>
                    <strong>Heart Rate Reserve:</strong> 190 - 60 = 130 bpm<br><br>
                    <strong>Training Zones (Karvonen Method):</strong><br><br>
                    <strong>Zone 1 - Recovery/Warm-up (50-60%):</strong><br>
                    • HR Range: 125-138 bpm<br>
                    • Purpose: Active recovery, warm-up, cool-down<br>
                    • Feel: Very comfortable, can hold full conversation<br>
                    • Duration: 20-60 minutes<br><br>
                    <strong>Zone 2 - Fat Burning/Base (60-70%):</strong><br>
                    • HR Range: 138-151 bpm<br>
                    • Purpose: Aerobic base, fat oxidation, endurance<br>
                    • Feel: Comfortable, can talk in sentences<br>
                    • Duration: 30-120 minutes (most training here)<br><br>
                    <strong>Zone 3 - Aerobic/Tempo (70-80%):</strong><br>
                    • HR Range: 151-164 bpm<br>
                    • Purpose: Aerobic capacity, lactate threshold<br>
                    • Feel: Moderate effort, can speak short phrases<br>
                    • Duration: 20-60 minutes<br><br>
                    <strong>Zone 4 - Anaerobic/Threshold (80-90%):</strong><br>
                    • HR Range: 164-177 bpm<br>
                    • Purpose: Lactate tolerance, speed endurance<br>
                    • Feel: Hard effort, few words only<br>
                    • Duration: 10-30 minutes (intervals)<br><br>
                    <strong>Zone 5 - VO2 Max/Maximum (90-100%):</strong><br>
                    • HR Range: 177-190 bpm<br>
                    • Purpose: Maximum oxygen uptake, peak power<br>
                    • Feel: Maximum effort, cannot talk<br>
                    • Duration: 30 seconds - 5 minutes (intervals)
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 Training recommendations:</h4>
                <ul>
                    <li><strong>Beginners:</strong> 80% Zone 2, 20% Zone 3, build aerobic base for 3-6 months</li>
                    <li><strong>Intermediate:</strong> 70% Zone 2, 20% Zone 3, 10% Zones 4-5</li>
                    <li><strong>Advanced:</strong> 60-70% Zone 2, 15-20% Zone 3, 10-20% Zones 4-5</li>
                    <li><strong>Fat Loss:</strong> Focus on Zone 2 (30-60 min), add Zone 3 tempo sessions</li>
                    <li><strong>Performance:</strong> Periodize with Zone 4-5 intervals (2-3×/week)</li>
                    <li><strong>Recovery:</strong> Zone 1 only on rest/recovery days</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Important Notes:</strong> Max HR formula (220-age) has ±10-20 bpm variation. Get actual max HR from: graded exercise test, all-out 3-5 min effort, or race data. Resting HR (measure upon waking): Athletes 40-60 bpm, Average 60-80 bpm, Untrained 80-100 bpm. Medications (beta-blockers) lower HR - consult physician. Heart rate lags behind effort by 30-60 seconds. Use Rate of Perceived Exertion (RPE) as backup. Overtraining signs: elevated resting HR (+5-10 bpm), poor HRV, difficulty reaching zones.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal10')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 11: Blood Pressure -->
    <div id="modal11" class="info-modal" role="dialog" aria-labelledby="modal11-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal11-title">💡 Blood Pressure Tracker Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Understanding blood pressure</h4>
                <p>Blood pressure measures the force of blood against artery walls. <strong>Systolic</strong> (top number) = pressure during heartbeat. <strong>Diastolic</strong> (bottom number) = pressure between beats. Measured in millimeters of mercury (mmHg). Chronic high blood pressure (hypertension) damages arteries, heart, kidneys, brain - leading cause of heart disease and stroke.</p>
                <div class="formula-box">
                    Blood Pressure = Systolic / Diastolic<br>
                    Example: 120/80 mmHg<br>
                    (Systolic 120, Diastolic 80)
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this tracker?</h4>
                <p>1. Enter systolic pressure (top/first number)</p>
                <p>2. Enter diastolic pressure (bottom/second number)</p>
                <p>3. Receive classification based on American Heart Association guidelines with recommendations</p>
                <div class="example-box">
                    <strong>American Heart Association Classifications:</strong><br><br>
                    <strong>✅ Normal: <120 AND <80</strong><br>
                    • Systolic < 120 mmHg AND Diastolic < 80 mmHg<br>
                    • Action: Maintain healthy lifestyle<br>
                    • Check: Annually<br><br>
                    <strong>⚠️ Elevated: 120-129 AND <80</strong><br>
                    • Systolic 120-129 mmHg AND Diastolic < 80 mmHg<br>
                    • Action: Adopt healthy habits (diet, exercise, stress management)<br>
                    • Check: Every 3-6 months<br><br>
                    <strong>🟠 Stage 1 Hypertension: 130-139 OR 80-89</strong><br>
                    • Systolic 130-139 OR Diastolic 80-89 mmHg<br>
                    • Action: Lifestyle changes + possible medication<br>
                    • Risk: 10-year CVD risk assessment<br>
                    • Check: Monthly, consult physician<br><br>
                    <strong>🔴 Stage 2 Hypertension: ≥140 OR ≥90</strong><br>
                    • Systolic ≥140 OR Diastolic ≥90 mmHg<br>
                    • Action: Medication + intensive lifestyle changes<br>
                    • Check: Weekly until controlled, then monthly<br><br>
                    <strong>🚨 Hypertensive Crisis: >180 AND/OR >120</strong><br>
                    • Systolic >180 OR Diastolic >120 mmHg<br>
                    • Action: SEEK IMMEDIATE MEDICAL CARE<br>
                    • Risk: Stroke, heart attack, organ damage<br><br>
                    <strong>Low Blood Pressure (Hypotension): <90/60</strong><br>
                    • May cause dizziness, fainting<br>
                    • Consult physician if symptomatic
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 Measurement best practices:</h4>
                <ul>
                    <li><strong>Timing:</strong> Same time daily, preferably morning before medications/coffee</li>
                    <li><strong>Preparation:</strong> No caffeine/exercise 30 min before, empty bladder, 5 min rest</li>
                    <li><strong>Position:</strong> Sit with back supported, feet flat, arm at heart level</li>
                    <li><strong>Cuff:</strong> Correct size, snug but not tight, on bare skin</li>
                    <li><strong>Technique:</strong> Don't talk during measurement, take 2-3 readings (average)</li>
                    <li><strong>Tracking:</strong> Record date, time, readings, medications, symptoms</li>
                    <li><strong>White Coat Hypertension:</strong> BP elevated at doctor's office but normal at home</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Lifestyle Modifications for High BP:</strong> 1) DASH diet (high in fruits, vegetables, low-fat dairy), 2) Reduce sodium <2,300mg/day (<1,500mg optimal), 3) Exercise 150 min/week moderate activity, 4) Maintain healthy weight (10 lb loss = 5-20 mmHg reduction), 5) Limit alcohol (≤1 drink/day women, ≤2 men), 6) Quit smoking, 7) Manage stress (meditation, yoga), 8) Quality sleep 7-9 hours. <strong>Emergency Signs:</strong> Severe headache, vision changes, chest pain, difficulty breathing, severe anxiety, nosebleeds - seek immediate care. Uncontrolled hypertension damages kidneys, eyes, brain, heart.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal11')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <!-- Modal 12: Pregnancy Weight Gain -->
    <div id="modal12" class="info-modal" role="dialog" aria-labelledby="modal12-title" aria-modal="true">
        <div class="info-modal-content">
            <h3 id="modal12-title">💡 Pregnancy Weight Gain Guide</h3>
            
            <div class="modal-section">
                <h4>🎯 Why pregnancy weight gain matters</h4>
                <p>Appropriate weight gain during pregnancy supports fetal development, maternal health, and positive birth outcomes. Insufficient gain increases risks of preterm birth, low birth weight, and developmental delays. Excessive gain increases risks of gestational diabetes, hypertension, C-section, postpartum weight retention, and childhood obesity.</p>
                <div class="formula-box">
                    Recommendations based on Pre-pregnancy BMI<br>
                    (Institute of Medicine 2009 Guidelines)
                </div>
            </div>

            <div class="modal-section">
                <h4>🔧 How to use this calculator?</h4>
                <p>1. Enter your height</p>
                <p>2. Enter your pre-pregnancy weight (weight before conception)</p>
                <p>3. Select pregnancy type (single or twins)</p>
                <p>4. Receive BMI category and recommended total weight gain range</p>
                <div class="example-box">
                    <strong>IOM Weight Gain Guidelines (Single Pregnancy):</strong><br><br>
                    <strong>Underweight (BMI <18.5):</strong><br>
                    • Total Gain: 28-40 lbs (12.7-18 kg)<br>
                    • Rate (2nd/3rd trimester): 1 lb/week<br>
                    • Rationale: Need extra reserves for pregnancy demands<br><br>
                    <strong>Normal Weight (BMI 18.5-24.9):</strong><br>
                    • Total Gain: 25-35 lbs (11.3-15.9 kg)<br>
                    • Rate (2nd/3rd trimester): 0.8-1 lb/week<br>
                    • Rationale: Optimal range for most pregnancies<br><br>
                    <strong>Overweight (BMI 25-29.9):</strong><br>
                    • Total Gain: 15-25 lbs (6.8-11.3 kg)<br>
                    • Rate (2nd/3rd trimester): 0.5-0.7 lb/week<br>
                    • Rationale: Existing reserves support pregnancy<br><br>
                    <strong>Obese (BMI ≥30):</strong><br>
                    • Total Gain: 11-20 lbs (5-9 kg)<br>
                    • Rate (2nd/3rd trimester): 0.4-0.6 lb/week<br>
                    • Rationale: Minimize complications while supporting baby<br><br>
                    <strong>Twins/Multiples:</strong><br>
                    • Normal Weight: 37-54 lbs (16.8-24.5 kg)<br>
                    • Overweight: 31-50 lbs (14.1-22.7 kg)<br>
                    • Obese: 25-42 lbs (11.3-19.1 kg)<br><br>
                    <strong>Where Weight Goes:</strong><br>
                    • Baby: 7-8 lbs<br>
                    • Placenta: 1-2 lbs<br>
                    • Amniotic fluid: 2 lbs<br>
                    • Uterus growth: 2 lbs<br>
                    • Breast tissue: 1-2 lbs<br>
                    • Blood volume: 3-4 lbs<br>
                    • Fluid retention: 2-3 lbs<br>
                    • Fat stores: 6-8 lbs
                </div>
            </div>

            <div class="modal-section">
                <h4>💼 Healthy pregnancy weight gain tips:</h4>
                <ul>
                    <li><strong>First Trimester:</strong> 1-5 lbs total (some lose weight due to nausea)</li>
                    <li><strong>Second/Third Trimesters:</strong> Steady weekly gain per BMI category</li>
                    <li><strong>Nutrition:</strong> +340 cal/day (2nd tri), +450 cal/day (3rd tri)</li>
                    <li><strong>Quality Focus:</strong> Nutrient-dense foods, not "eating for two"</li>
                    <li><strong>Exercise:</strong> 150 min/week moderate activity if approved by doctor</li>
                    <li><strong>Hydration:</strong> 10 cups water daily, more if exercising</li>
                    <li><strong>Monitoring:</strong> Weekly weigh-ins, same time/conditions</li>
                    <li><strong>Key Nutrients:</strong> Folic acid, iron, calcium, DHA, protein</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Warning Signs - Contact Healthcare Provider If:</strong> Sudden weight gain >2 lbs/week (may indicate preeclampsia), weight loss in 2nd/3rd trimester, severe nausea preventing eating/hydration, swelling in face/hands with headache/vision changes. <strong>Gestational Diabetes Risk:</strong> Excessive gain increases GDM risk - monitor with glucose screening 24-28 weeks. <strong>Postpartum:</strong> Typically lose 12-15 lbs immediately (baby, placenta, fluid). Remaining weight: 6-12 months to lose with healthy diet, breastfeeding (burns 300-500 cal/day), gradual exercise. Never diet during pregnancy without medical supervision.
            </div>

            <button class="modal-close-btn" onclick="closeModal('modal12')" aria-label="Close modal">Got it ✓</button>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 RapidPercent.com - Professional Health Calculator Suite</p>
            <p style="margin-top: 12px; opacity: 0.92; font-size: 1.05rem;">12 Medical-Grade Health Calculators • Scientifically Validated Formulas • 100% Free • Privacy Protected</p>
            <p style="margin-top: 10px; opacity: 0.85; font-size: 0.95rem;">Trusted worldwide for accurate health tracking, fitness planning, pregnancy monitoring, and wellness optimization</p>
            <p style="margin-top: 15px; opacity: 0.8; font-size: 0.9rem;">BMI Calculator | TDEE/Calorie Calculator | Pregnancy Due Date | Ovulation Calculator | Water Intake | Body Fat % | Ideal Weight | BMR | Macros | Heart Rate Zones | Blood Pressure | Pregnancy Weight Gain</p>
        </div>
    </footer>

	<!-- Sticky Medical Disclaimer Banner -->
	<div class="sticky-medical-disclaimer" id="stickyDisclaimer">
		<span class="disclaimer-icon">⚠️</span>
		<p><strong>Medical Disclaimer:</strong> These calculators are for informational purposes only and do not constitute medical advice. Always consult a healthcare professional.</p>
		<button class="close-disclaimer" onclick="closeStickyDisclaimer()" title="Dismiss" aria-label="Close disclaimer">×</button>
	</div>

    <script>
        'use strict';
        
        // ==================== UTILITY FUNCTIONS ====================
        
        // Debounce function for performance optimization
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
		
		// Rate limiter para prevenir abuse
		const rateLimiters = new Map();

		function rateLimit(funcName, func, limit = 10, timeWindow = 1000) {
			return function(...args) {
				const now = Date.now();
        
				if (!rateLimiters.has(funcName)) {
					rateLimiters.set(funcName, { calls: [], blocked: false });
				}
        
				const limiter = rateLimiters.get(funcName);
        
				// Limpiar llamadas antiguas fuera de la ventana de tiempo
				limiter.calls = limiter.calls.filter(time => now - time < timeWindow);
        
				// Si está bloqueado temporalmente
				if (limiter.blocked) {
					console.warn(`${funcName} is rate-limited. Please wait.`);
					return;
				}
        
				// Si excede el límite, bloquear temporalmente
				if (limiter.calls.length >= limit) {
					limiter.blocked = true;
					console.warn(`${funcName} rate limit exceeded. Cooling down for 2 seconds.`);
					setTimeout(() => {
						limiter.blocked = false;
						limiter.calls = [];
					}, 2000);
					return;
				}
        
				// Registrar la llamada y ejecutar
				limiter.calls.push(now);
				return func.apply(this, args);
			};
		}

		// ==================== SANITIZACIÓN XSS ====================

		// Función para escapar HTML y prevenir XSS
		function escapeHTML(str) {
			if (typeof str !== 'string') return str;
    
			const div = document.createElement('div');
			div.textContent = str;
			return div.innerHTML;
		}

		// Función para sanitizar números (asegurar que son números válidos)
		function sanitizeNumber(num) {
			const parsed = parseFloat(num);
			return isNaN(parsed) ? 0 : parsed;
		}

		// Función para crear HTML seguro con valores dinámicos
		function safeHTML(strings, ...values) {
			let result = strings[0];
    
			for (let i = 0; i < values.length; i++) {
				const value = values[i];
        
				// Si es número, sanitizar
				if (typeof value === 'number') {
					result += sanitizeNumber(value);
				}
				// Si es string, escapar HTML
				else if (typeof value === 'string') {
					result += escapeHTML(value);
				}
				// Otros tipos (booleanos, etc)
				else {
					result += String(value);
				}
        
				result += strings[i + 1];
			}
    
			return result;
		}

        // Input validation helper
        function validateInput(inputId, min, max, errorId, successId) {
            const input = document.getElementById(inputId);
            const errorMsg = document.getElementById(errorId);
            const successMsg = document.getElementById(successId);
            
            if (!input) return false;
            
            const value = parseFloat(input.value);
            
            if (input.value === '') {
                input.classList.remove('error', 'valid');
                if (errorMsg) errorMsg.style.display = 'none';
                if (successMsg) successMsg.style.display = 'none';
                return false;
            }
            
            if (isNaN(value) || value < min || value > max) {
                input.classList.add('error');
                input.classList.remove('valid');
                if (errorMsg) errorMsg.style.display = 'block';
                if (successMsg) successMsg.style.display = 'none';
                return false;
            }
            
            input.classList.remove('error');
            input.classList.add('valid');
            if (errorMsg) errorMsg.style.display = 'none';
            if (successMsg) successMsg.style.display = 'block';
            return true;
        }

        // Animate result display
        function animateResult(resultId) {
            const result = document.getElementById(resultId);
            if (result) {
                result.classList.add('calculated');
                setTimeout(() => result.classList.remove('calculated'), 500);
            }
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // ==================== BMI CALCULATOR ====================
        function toggleBMIUnits() {
			const system = document.getElementById('bmi-system').value;
			const weightLabel = document.getElementById('bmi-weight-label');
			const heightLabel = document.getElementById('bmi-height-label');
			const weightInput = document.getElementById('bmi-weight');
			const heightInput = document.getElementById('bmi-height');
    
			// Guardar el sistema anterior antes del cambio
			const previousSystem = weightInput.dataset.currentSystem || 'metric';
			weightInput.dataset.currentSystem = system;
    
			// Obtener valores actuales
			let currentWeight = parseFloat(weightInput.value);
			let currentHeight = parseFloat(heightInput.value);
    
			if (system === 'imperial') {
				weightLabel.textContent = 'Weight (lbs):';
				heightLabel.textContent = 'Height (inches):';
				weightInput.placeholder = 'e.g., 154';
				heightInput.placeholder = 'e.g., 67';
				weightInput.min = '66'; // 30 kg
				weightInput.max = '1100'; // 500 kg
				heightInput.min = '39'; // 100 cm
				heightInput.max = '118'; // 300 cm
        
				// Convertir de métrico a imperial si hay valores
				if (!isNaN(currentWeight) && !isNaN(currentHeight) && previousSystem === 'metric') {
					weightInput.value = (currentWeight * 2.20462).toFixed(1);
					heightInput.value = (currentHeight / 2.54).toFixed(1);
				} else {
					weightInput.value = '';
					heightInput.value = '';
				}
			} else {
				weightLabel.textContent = 'Weight (kg):';
				heightLabel.textContent = 'Height (cm):';
				weightInput.placeholder = 'e.g., 70';
				heightInput.placeholder = 'e.g., 170';
				weightInput.min = '30';
				weightInput.max = '500';
				heightInput.min = '100';
				heightInput.max = '300';
        
				// Convertir de imperial a métrico si hay valores
				if (!isNaN(currentWeight) && !isNaN(currentHeight) && previousSystem === 'imperial') {
					weightInput.value = (currentWeight / 2.20462).toFixed(1);
					heightInput.value = (currentHeight * 2.54).toFixed(1);
				} else {
					weightInput.value = '';
					heightInput.value = '';
				}
			}
    
			calculateBMI();
		}

        const calculateBMI = rateLimit('calculateBMI', debounce(function() {
            const system = document.getElementById('bmi-system').value;
            let weight = parseFloat(document.getElementById('bmi-weight').value);
            let height = parseFloat(document.getElementById('bmi-height').value);
            const result = document.getElementById('result-bmi');
            const progressBar = document.getElementById('bmi-progress-bar');
            const progressIndicator = document.getElementById('bmi-progress');
            
            // Validate inputs
            const weightValid = validateInput('bmi-weight', system === 'metric' ? 30 : 66, system === 'metric' ? 500 : 1100, 'error-bmi-weight', 'success-bmi-weight');
            const heightValid = validateInput('bmi-height', system === 'metric' ? 100 : 39, system === 'metric' ? 300 : 118, 'error-bmi-height', 'success-bmi-height');
            
            if (!weightValid || !heightValid) {
                result.textContent = 'Enter your measurements above';
                if (progressIndicator) progressIndicator.style.display = 'none';
                return;
            }
            
            // Convert to metric if imperial
            if (system === 'imperial') {
                weight = weight * 0.453592; // lbs to kg
                height = height * 2.54; // inches to cm
            }
            
            // Calculate BMI
            const heightInMeters = height / 100;
            const bmi = weight / (heightInMeters * heightInMeters);
            
            // Determine category and color
            let category = '';
            let color = '';
            let advice = '';
            let progressPercent = 0;
            
            if (bmi < 16) {
                category = 'Severely Underweight';
                color = '#dc2626';
                advice = 'Consult healthcare provider immediately';
                progressPercent = (bmi / 16) * 20;
            } else if (bmi < 18.5) {
                category = 'Underweight';
                color = '#f59e0b';
                advice = 'Consider consulting a nutritionist';
                progressPercent = 20 + ((bmi - 16) / 2.5) * 15;
            } else if (bmi < 25) {
                category = 'Normal Weight';
                color = '#10b981';
                advice = 'Maintain healthy lifestyle';
                progressPercent = 35 + ((bmi - 18.5) / 6.5) * 30;
            } else if (bmi < 30) {
                category = 'Overweight';
                color = '#f59e0b';
                advice = 'Consider healthy weight loss';
                progressPercent = 65 + ((bmi - 25) / 5) * 15;
            } else if (bmi < 35) {
                category = 'Obese Class I';
                color = '#dc2626';
                advice = 'Consult healthcare provider';
                progressPercent = 80 + ((bmi - 30) / 5) * 10;
            } else if (bmi < 40) {
                category = 'Obese Class II';
                color = '#dc2626';
                advice = 'Medical intervention recommended';
                progressPercent = 90 + ((bmi - 35) / 5) * 5;
            } else {
                category = 'Obese Class III';
                color = '#991b1b';
                advice = 'Immediate medical consultation needed';
                progressPercent = Math.min(95 + ((bmi - 40) / 10) * 5, 100);
            }
            
            result.innerHTML = `
				<div style="font-size: 1.5rem; font-weight: 800; margin-bottom: 8px;">
					BMI: ${sanitizeNumber(bmi.toFixed(1))}
				</div>
				<div class="result-detail" style="color: ${escapeHTML(color)}; font-weight: 700; font-size: 1.1rem;">
					${escapeHTML(category)}
				</div>
				<div class="result-detail" style="margin-top: 10px; font-size: 0.95rem;">
					${escapeHTML(advice)}
				</div>
			`;
            
            // Show and animate progress bar
            if (progressIndicator && progressBar) {
                progressIndicator.style.display = 'block';
                progressBar.style.width = '0%';
                setTimeout(() => {
                    progressBar.style.width = progressPercent + '%';
                }, 100);
            }
            
            animateResult('result-bmi');
        }, 300));

        // ==================== CALORIE CALCULATOR (TDEE) ====================
        const calculateCalories = rateLimit('calculateCalories', debounce(function() {
            const gender = document.getElementById('cal-gender').value;
            const age = parseFloat(document.getElementById('cal-age').value);
            const weight = parseFloat(document.getElementById('cal-weight').value);
            const height = parseFloat(document.getElementById('cal-height').value);
            const activity = parseFloat(document.getElementById('cal-activity').value);
            const result = document.getElementById('result-calories');
            
            // Validate inputs
            const ageValid = validateInput('cal-age', 15, 120, 'error-cal-age', 'success-cal-age');
            const weightValid = validateInput('cal-weight', 30, 300, 'error-cal-weight', 'success-cal-weight');
            const heightValid = validateInput('cal-height', 100, 250, 'error-cal-height', 'success-cal-height');
            
            if (!ageValid || !weightValid || !heightValid) {
                result.textContent = 'Enter your information above';
                return;
            }
            
            // Mifflin-St Jeor Equation (most accurate)
            let bmr;
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }
            
            // Calculate TDEE
            const tdee = Math.round(bmr * activity);
            const weightLoss = Math.round(tdee - 500);
            const extremeLoss = Math.round(tdee - 750);
            const weightGain = Math.round(tdee + 500);
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.05rem;">
                    <div style="font-size: 1.15rem; font-weight: 800; margin-bottom: 12px;">
                        💚 Maintenance: ${formatNumber(tdee)} cal/day
                    </div>
                    <div style="font-size: 0.98rem; opacity: 0.95;">
                        📉 Mild Loss (-0.5 lb/week): ${formatNumber(weightLoss)} cal/day<br>
                        📉 Weight Loss (-1 lb/week): ${formatNumber(extremeLoss)} cal/day<br>
                        📈 Weight Gain (+0.5 lb/week): ${formatNumber(weightGain)} cal/day
                    </div>
                    <div style="font-size: 0.88rem; margin-top: 12px; opacity: 0.9;">
                        BMR: ${Math.round(bmr)} cal/day (at rest)
                    </div>
                </div>
            `;
            
            animateResult('result-calories');
        }, 300));

        // ==================== PREGNANCY DUE DATE ====================
        function calculateDueDate() {
            const lmpDate = document.getElementById('lmp-date').value;
            const result = document.getElementById('result-duedate');
            
            if (!lmpDate) {
                result.textContent = 'Select your LMP date above';
                document.getElementById('error-lmp-date').style.display = 'none';
                document.getElementById('success-lmp-date').style.display = 'none';
                return;
            }
            
            const lmp = new Date(lmpDate);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            lmp.setHours(0, 0, 0, 0);
            
            // Check if date is in future
            if (lmp > today) {
                result.textContent = 'LMP date cannot be in the future';
                result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                document.getElementById('error-lmp-date').style.display = 'block';
                document.getElementById('success-lmp-date').style.display = 'none';
                return;
            }
            
            // Check if date is too old (more than 45 weeks ago)
            const daysSinceLMP = Math.floor((today - lmp) / (1000 * 60 * 60 * 24));
            if (daysSinceLMP > 315) { // 45 weeks
                result.innerHTML = `
                    <div style="line-height: 1.8; font-size: 1.05rem;">
                        This date is over 45 weeks ago.<br>
                        Please verify the LMP date or consult your healthcare provider.
                    </div>
                `;
                result.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
                animateResult('result-duedate');
                return;
            }
            
            document.getElementById('error-lmp-date').style.display = 'none';
            document.getElementById('success-lmp-date').style.display = 'block';
            
            // Calculate due date (280 days from LMP)
            const dueDate = new Date(lmp);
            dueDate.setDate(dueDate.getDate() + 280);
            
            // Calculate weeks pregnant
            const diffDays = daysSinceLMP;
            const weeks = Math.floor(diffDays / 7);
            const days = diffDays % 7;
            
            // Determine trimester
            let trimester;
            let trimesterEmoji;
            if (weeks < 13) {
                trimester = 'First Trimester';
                trimesterEmoji = '🌱';
            } else if (weeks < 27) {
                trimester = 'Second Trimester';
                trimesterEmoji = '🤰';
            } else {
                trimester = 'Third Trimester';
                trimesterEmoji = '👶';
            }
            
            // Calculate days until due date
            const daysUntilDue = Math.floor((dueDate - today) / (1000 * 60 * 60 * 24));
			const dueDateStr = dueDate.toLocaleDateString('en-US', { 
				year: 'numeric', 
				month: 'long', 
				day: 'numeric',
				weekday: 'long'
			});

			// Sanitizar la fecha (aunque toLocaleDateString es seguro, por defensa en profundidad)
			const safeDateStr = escapeHTML(dueDateStr);

			if (weeks > 42) {
				result.innerHTML = `
					<div style="line-height: 1.8; font-size: 1.05rem;">
						<div style="font-weight: 800; font-size: 1.15rem; margin-bottom: 8px;">
							📅 Due Date: ${safeDateStr}
						</div>
						<div style="color: #fef3c7; font-weight: 700;">
							⚠️ Post-term Pregnancy
						</div>
						<div style="margin-top: 10px; font-size: 0.95rem;">
							${sanitizeNumber(weeks)} weeks, ${sanitizeNumber(days)} days pregnant<br>
							Consult your healthcare provider
						</div>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
				animateResult('result-duedate');
				return;
			}

			if (daysUntilDue < 0) {
				result.innerHTML = `
					<div style="line-height: 1.8; font-size: 1.05rem;">
						<div style="font-weight: 800; font-size: 1.15rem; margin-bottom: 8px;">
							📅 Due Date Was: ${safeDateStr}
						</div>
						<div style="margin-top: 10px;">
							${sanitizeNumber(Math.abs(daysUntilDue))} days past due date<br>
							${sanitizeNumber(weeks)} weeks, ${sanitizeNumber(days)} days since LMP
						</div>
					</div>
				`;
			} else {
				result.innerHTML = `
					<div style="line-height: 1.8; font-size: 1.05rem;">
						<div style="font-weight: 800; font-size: 1.15rem; margin-bottom: 8px;">
							📅 Due Date: ${safeDateStr}
						</div>
						<div style="margin-top: 10px;">
							${escapeHTML(trimesterEmoji)} <strong>${sanitizeNumber(weeks)} weeks, ${sanitizeNumber(days)} days</strong> pregnant<br>
							<strong>${escapeHTML(trimester)}</strong><br>
							${sanitizeNumber(daysUntilDue)} days until due date
						</div>
					</div>
				`;
			}
            
            result.style.background = 'linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%)';
            animateResult('result-duedate');
        }

        // ==================== OVULATION CALCULATOR ====================
        function calculateOvulation() {
            const cycleStart = document.getElementById('cycle-start').value;
            const cycleLength = parseInt(document.getElementById('cycle-length').value);
            const result = document.getElementById('result-ovulation');
            
            if (!cycleStart) {
                result.textContent = 'Enter your cycle information above';
                document.getElementById('error-cycle-start').style.display = 'none';
                document.getElementById('success-cycle-start').style.display = 'none';
                return;
            }
            
            const lengthValid = validateInput('cycle-length', 21, 45, 'error-cycle-length', 'success-cycle-length');
            
            if (!lengthValid) {
                result.textContent = 'Enter valid cycle length (21-45 days)';
                return;
            }
            
            const startDate = new Date(cycleStart);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            startDate.setHours(0, 0, 0, 0);
            
            // Check if date is too far in future
			if (startDate > today) {
				result.textContent = 'Cycle start date cannot be in the future';
				result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
				document.getElementById('error-cycle-start').style.display = 'block';
				document.getElementById('success-cycle-start').style.display = 'none';
				return;
			}

			// VALIDACIÓN: Verificar que no sea demasiado antigua (>90 días)
			const daysSinceStart = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
			if (daysSinceStart > 90) {
				result.innerHTML = `
					<div style="line-height: 1.8; font-size: 1.05rem;">
						⚠️ Date is ${daysSinceStart} days ago<br>
						<span style="font-size: 0.95rem;">For accuracy, use dates within last 90 days.<br>
						Consider entering a more recent cycle start date.</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
				document.getElementById('error-cycle-start').style.display = 'none';
				document.getElementById('success-cycle-start').style.display = 'block';
				animateResult('result-ovulation');
				return;
			}

			document.getElementById('error-cycle-start').style.display = 'none';
			document.getElementById('success-cycle-start').style.display = 'block';

			// Calculate ovulation day (typically 14 days before next period)
			const ovulationDay = cycleLength - 14;
            const ovulationDate = new Date(startDate);
            ovulationDate.setDate(ovulationDate.getDate() + ovulationDay);
            
            // Calculate fertile window (5 days before ovulation to ovulation day)
            const fertileStart = new Date(ovulationDate);
            fertileStart.setDate(fertileStart.getDate() - 5);
            
            const fertileEnd = ovulationDate;
            
            // Most fertile days (2-3 days before ovulation)
            const mostFertileStart = new Date(ovulationDate);
            mostFertileStart.setDate(mostFertileStart.getDate() - 3);
            
            // Next period date
			const nextPeriod = new Date(startDate);
			nextPeriod.setDate(nextPeriod.getDate() + cycleLength);

			// VALIDACIÓN: Verificar si nextPeriod ya pasó (ciclo ya debería haber terminado)
			const daysUntilNextPeriod = Math.floor((nextPeriod - today) / (1000 * 60 * 60 * 24));
			let nextPeriodNote = '';
			if (daysUntilNextPeriod < 0) {
				nextPeriodNote = ` (${Math.abs(daysUntilNextPeriod)} days overdue)`;
			}

			const ovulationStr = escapeHTML(ovulationDate.toLocaleDateString('en-US', { 
				month: 'short', 
				day: 'numeric',
				year: 'numeric'
			}));

			const fertileStartStr = escapeHTML(fertileStart.toLocaleDateString('en-US', { 
				month: 'short', 
				day: 'numeric'
			}));

			const fertileEndStr = escapeHTML(fertileEnd.toLocaleDateString('en-US', { 
				month: 'short', 
				day: 'numeric'
			}));

			const mostFertileStartStr = escapeHTML(mostFertileStart.toLocaleDateString('en-US', { 
				month: 'short', 
				day: 'numeric'
			}));

			const nextPeriodStr = escapeHTML(nextPeriod.toLocaleDateString('en-US', { 
				month: 'short', 
				day: 'numeric',
				year: 'numeric'
			}));
            
            // Check if currently in fertile window
            const isFertile = today >= fertileStart && today <= fertileEnd;
            const isOvulating = today.getTime() === ovulationDate.getTime();
            
            let statusMessage = '';
            if (isOvulating) {
                statusMessage = '<div style="background: rgba(255,255,255,0.3); padding: 10px; border-radius: 10px; margin-top: 12px; font-weight: 700;">🌟 Ovulating TODAY! Peak fertility</div>';
            } else if (isFertile) {
                statusMessage = '<div style="background: rgba(255,255,255,0.3); padding: 10px; border-radius: 10px; margin-top: 12px; font-weight: 700;">💚 Currently in fertile window!</div>';
            }
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.02rem;">
                    <div style="font-weight: 800; margin-bottom: 10px;">
                        🌸 Ovulation Day: ${ovulationStr}
                    </div>
                    <div>
                        💚 Fertile Window: ${fertileStartStr} - ${fertileEndStr}<br>
                        ⭐ Most Fertile: ${mostFertileStartStr} - ${fertileEndStr}<br>
                        📅 Next Period: ${nextPeriodStr}${nextPeriodNote}
                    </div>
                    ${statusMessage}
                </div>
            `;
            
            result.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%)';
            animateResult('result-ovulation');
        }

        // ==================== WATER INTAKE CALCULATOR ====================
        const calculateWater = rateLimit('calculateWater', debounce(function() {
            const weight = parseFloat(document.getElementById('water-weight').value);
            const activity = parseFloat(document.getElementById('water-activity').value);
            const climate = parseFloat(document.getElementById('water-climate').value);
            const result = document.getElementById('result-water');
            
            const weightValid = validateInput('water-weight', 30, 300, 'error-water-weight', 'success-water-weight');
            
            if (!weightValid) {
                result.textContent = 'Enter your information above';
                return;
            }
            
            // Base calculation: 33ml per kg (middle of 30-35ml range)
            let waterMl = weight * 33;
            
            // Add for activity
            waterMl += activity * 500;
            
            // Add for climate
            waterMl += climate * 500;
            
            const liters = (waterMl / 1000).toFixed(1);
            const cups = Math.round(waterMl / 240); // 240ml per cup
            const ounces = Math.round(waterMl / 29.5735); // Convert to fl oz
            const glasses = Math.round(waterMl / 250); // 250ml glasses
            
            // Determine hydration level description
            let description = '';
            if (waterMl < 2000) {
                description = 'Basic hydration needs';
            } else if (waterMl < 3000) {
                description = 'Moderate hydration needs';
            } else if (waterMl < 4000) {
                description = 'Active hydration needs';
            } else {
                description = 'High hydration needs';
            }
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.05rem;">
                    <div style="font-size: 1.4rem; font-weight: 800; margin-bottom: 12px;">
                        💧 ${liters} liters/day
                    </div>
                    <div style="font-size: 0.98rem; opacity: 0.95;">
                        📊 ${cups} cups (8 oz) or ${ounces} fl oz<br>
                        🥤 ${glasses} glasses (250ml each)<br>
                        <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.9;">
                            ${description}
                        </div>
                    </div>
                    <div style="font-size: 0.85rem; margin-top: 12px; opacity: 0.88;">
                        💡 Tip: Spread intake throughout day
                    </div>
                </div>
            `;
            
            animateResult('result-water');
        }, 300));

        // ==================== BODY FAT CALCULATOR ====================
        const calculateBodyFat = rateLimit('calculateBodyFat', debounce(function() {
			const gender = document.getElementById('bf-gender').value;
			const age = parseFloat(document.getElementById('bf-age').value);
			const weight = parseFloat(document.getElementById('bf-weight').value);
			const height = parseFloat(document.getElementById('bf-height').value);
			const neck = parseFloat(document.getElementById('bf-neck').value);
			const waist = parseFloat(document.getElementById('bf-waist').value);
			const hip = parseFloat(document.getElementById('bf-hip').value);
			const result = document.getElementById('result-bodyfat');
    
			// Mostrar/ocultar input de cadera según género
			const hipGroup = document.getElementById('bf-hip-group');
			if (gender === 'female') {
				hipGroup.style.display = 'block';
			} else {
				hipGroup.style.display = 'none';
			}
    
			const ageValid = validateInput('bf-age', 18, 100, 'error-bf-age', 'success-bf-age');
			const weightValid = validateInput('bf-weight', 30, 300, 'error-bf-weight', 'success-bf-weight');
			const heightValid = validateInput('bf-height', 100, 250, 'error-bf-height', 'success-bf-height');
			const neckValid = validateInput('bf-neck', 20, 60, 'error-bf-neck', 'success-bf-neck');
			const waistValid = validateInput('bf-waist', 40, 200, 'error-bf-waist', 'success-bf-waist');
    
			// Para mujeres, validar cadera también
			let hipValid = true;
			if (gender === 'female') {
				hipValid = validateInput('bf-hip', 50, 200, 'error-bf-hip', 'success-bf-hip');
			}
    
			if (!ageValid || !weightValid || !heightValid || !neckValid || !waistValid || (gender === 'female' && !hipValid)) {
				result.textContent = 'Enter all measurements above';
				return;
			}
    
			// US NAVY METHOD REAL - Fórmulas originales auténticas
			let bodyFat;
    
			if (gender === 'male') {
				// Fórmula hombres: 495 / (1.0324 - 0.19077 * log10(waist - neck) + 0.15456 * log10(height)) - 450
				const log10WaistMinusNeck = Math.log10(waist - neck);
				const log10Height = Math.log10(height);
				bodyFat = 495 / (1.0324 - 0.19077 * log10WaistMinusNeck + 0.15456 * log10Height) - 450;
			} else {
				// Fórmula mujeres: 495 / (1.29579 - 0.35004 * log10(waist + hip - neck) + 0.22100 * log10(height)) - 450
				const log10WaistPlusHipMinusNeck = Math.log10(waist + hip - neck);
				const log10Height = Math.log10(height);
				bodyFat = 495 / (1.29579 - 0.35004 * log10WaistPlusHipMinusNeck + 0.22100 * log10Height) - 450;
			}
    
			// Validar que las medidas tengan sentido (cuello no puede ser >= cintura)
			if (gender === 'male' && neck >= waist) {
				result.innerHTML = `
					<div style="line-height: 1.8;">
						⚠️ Invalid Measurements<br>
						<span style="font-size: 0.95rem;">Neck circumference should be less than waist.<br>
						Please verify your measurements.</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
				animateResult('result-bodyfat');
				return;
			}
    
			if (gender === 'female' && neck >= (waist + hip)) {
				result.innerHTML = `
					<div style="line-height: 1.8;">
						⚠️ Invalid Measurements<br>
						<span style="font-size: 0.95rem;">Neck measurement seems incorrect relative to waist and hip.<br>
						Please verify your measurements.</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
				animateResult('result-bodyfat');
				return;
			}
    
			// Ensure reasonable bounds (el método puede dar valores extremos con medidas incorrectas)
			bodyFat = Math.max(3, Math.min(bodyFat, 60));
    
			// Determine category and recommendations
			let category, color, advice, emoji;
    
			if (gender === 'male') {
				if (bodyFat < 6) {
					category = 'Essential Fat';
					color = '#dc2626';
					advice = 'Too low - health risks';
					emoji = '⚠️';
				} else if (bodyFat < 14) {
					category = 'Athletes';
					color = '#10b981';
					advice = 'Excellent fitness level';
					emoji = '💪';
				} else if (bodyFat < 18) {
					category = 'Fitness';
					color = '#10b981';
					advice = 'Good fitness level';
					emoji = '✅';
				} else if (bodyFat < 25) {
					category = 'Average/Acceptable';
					color = '#f59e0b';
					advice = 'Healthy range';
					emoji = '👍';
				} else {
					category = 'Obese';
					color = '#dc2626';
					advice = 'Consider fat loss program';
					emoji = '⚠️';
				}
			} else {
				if (bodyFat < 14) {
					category = 'Essential Fat';
					color = '#dc2626';
					advice = 'Too low - health risks';
					emoji = '⚠️';
				} else if (bodyFat < 21) {
					category = 'Athletes';
					color = '#10b981';
					advice = 'Excellent fitness level';
					emoji = '💪';
				} else if (bodyFat < 25) {
					category = 'Fitness';
					color = '#10b981';
					advice = 'Good fitness level';
					emoji = '✅';
				} else if (bodyFat < 32) {
					category = 'Average/Acceptable';
					color = '#f59e0b';
					advice = 'Healthy range';
					emoji = '👍';
				} else {
					category = 'Obese';
					color = '#dc2626';
					advice = 'Consider fat loss program';
					emoji = '⚠️';
				}
			}
    
			// Calculate lean mass and fat mass
			const fatMass = (weight * bodyFat / 100).toFixed(1);
			const leanMass = (weight - fatMass).toFixed(1);
    
			result.innerHTML = `
				<div style="line-height: 1.9; font-size: 1.05rem;">
					<div style="font-size: 1.4rem; font-weight: 800; margin-bottom: 8px;">
						${escapeHTML(emoji)} Body Fat: ${sanitizeNumber(bodyFat.toFixed(1))}%
					</div>
					<div style="color: ${escapeHTML(color)}; font-weight: 700; font-size: 1.08rem; margin-bottom: 10px;">
						${escapeHTML(category)}
					</div>
					<div style="font-size: 0.95rem; opacity: 0.95;">
						Fat Mass: ${sanitizeNumber(fatMass)} kg<br>
						Lean Mass: ${sanitizeNumber(leanMass)} kg<br>
						<div style="margin-top: 8px; font-size: 0.9rem;">
							${escapeHTML(advice)}
						</div>
					</div>
					<div style="font-size: 0.82rem; margin-top: 10px; opacity: 0.85;">
						📏 US Navy Method (authentic formula)
					</div>
				</div>
			`;
    
			animateResult('result-bodyfat');
		}, 300));

        // ==================== IDEAL WEIGHT CALCULATOR ====================
        const calculateIdealWeight = rateLimit('calculateIdealWeight', debounce(function() {
            const gender = document.getElementById('iw-gender').value;
            const height = parseFloat(document.getElementById('iw-height').value);
            const frame = document.getElementById('iw-frame').value;
            const result = document.getElementById('result-idealweight');
            
            const heightValid = validateInput('iw-height', 100, 250, 'error-iw-height', 'success-iw-height');
            
            if (!heightValid) {
                result.textContent = 'Enter your height above';
                return;
            }
            
            const heightInInches = height / 2.54;

			// Validar altura mínima realista para fórmulas (152cm / 60 inches)
			if (height < 152) {
				result.innerHTML = `
					<div style="line-height: 1.9; font-size: 1.05rem;">
						⚠️ Height Too Short for Standard Formulas<br>
						<span style="font-size: 0.95rem;">
							Standard ideal weight formulas (Devine, Robinson, Miller) are designed for adults ≥152cm (5'0").<br><br>
							For heights <152cm, consult healthcare provider for personalized assessment.<br><br>
							Approximate healthy range for ${height}cm:<br>
							<strong>${(18.5 * Math.pow(height/100, 2)).toFixed(1)} - ${(24.9 * Math.pow(height/100, 2)).toFixed(1)} kg</strong><br>
							(Based on BMI 18.5-24.9)
						</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
				animateResult('result-idealweight');
				return;
			}

			// Multiple formulas for better range
			let devine, robinson, miller;

			if (gender === 'male') {
				// Devine Formula (solo para altura >= 152cm)
				devine = 50 + 2.3 * (heightInInches - 60);
				// Robinson Formula
				robinson = 52 + 1.9 * (heightInInches - 60);
				// Miller Formula
				miller = 56.2 + 1.41 * (heightInInches - 60);
			} else {
				// Devine Formula
				devine = 45.5 + 2.3 * (heightInInches - 60);
				// Robinson Formula
				robinson = 49 + 1.7 * (heightInInches - 60);
				// Miller Formula
				miller = 53.1 + 1.36 * (heightInInches - 60);
			}
            
            // Calculate average and range
            const average = (devine + robinson + miller) / 3;
            let min = Math.min(devine, robinson, miller);
            let max = Math.max(devine, robinson, miller);
            
            // Adjust for frame size
            const frameMultiplier = frame === 'small' ? 0.9 : frame === 'large' ? 1.1 : 1.0;
            min = min * frameMultiplier;
            max = max * frameMultiplier;
            
            // Convert to lbs
            const minLbs = Math.round(min * 2.20462);
            const maxLbs = Math.round(max * 2.20462);
            
            // Frame description
            const frameDesc = frame === 'small' ? 'Small Frame' : frame === 'large' ? 'Large Frame' : 'Medium Frame';
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.05rem;">
                    <div style="font-weight: 800; font-size: 1.15rem; margin-bottom: 12px;">
                        ⚖️ Ideal Weight Range (${frameDesc}):
                    </div>
                    <div style="font-size: 1.25rem; font-weight: 700; margin-bottom: 10px;">
                        ${min.toFixed(1)} - ${max.toFixed(1)} kg
                    </div>
                    <div style="font-size: 1.05rem; opacity: 0.95;">
                        (${minLbs} - ${maxLbs} lbs)
                    </div>
                    <div style="font-size: 0.88rem; margin-top: 12px; opacity: 0.9;">
                        Based on Devine, Robinson & Miller formulas
                    </div>
                </div>
            `;
            
            animateResult('result-idealweight');
        }, 300));

        // ==================== BMR CALCULATOR ====================
        const calculateBMR = rateLimit('calculateBMR', debounce(function() {
            const gender = document.getElementById('bmr-gender').value;
            const age = parseFloat(document.getElementById('bmr-age').value);
            const weight = parseFloat(document.getElementById('bmr-weight').value);
            const height = parseFloat(document.getElementById('bmr-height').value);
            const result = document.getElementById('result-bmr');
            
            const ageValid = validateInput('bmr-age', 15, 120, 'error-bmr-age', 'success-bmr-age');
            const weightValid = validateInput('bmr-weight', 30, 300, 'error-bmr-weight', 'success-bmr-weight');
            const heightValid = validateInput('bmr-height', 100, 250, 'error-bmr-height', 'success-bmr-height');
            
            if (!ageValid || !weightValid || !heightValid) {
                result.textContent = 'Enter your information above';
                return;
            }
            
            // Mifflin-St Jeor Equation
            let bmr;
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }
            
            bmr = Math.round(bmr);
            
            // Calculate TDEE ranges for reference
            const sedentary = Math.round(bmr * 1.2);
            const light = Math.round(bmr * 1.375);
            const moderate = Math.round(bmr * 1.55);
            const active = Math.round(bmr * 1.725);
            const veryActive = Math.round(bmr * 1.9);
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.05rem;">
                    <div style="font-size: 1.4rem; font-weight: 800; margin-bottom: 12px;">
                        🔬 BMR: ${formatNumber(bmr)} cal/day
                    </div>
                    <div style="font-size: 0.92rem; opacity: 0.95; margin-bottom: 12px;">
                        Calories burned at complete rest
                    </div>
                    <div style="font-size: 0.88rem; opacity: 0.9; line-height: 1.7;">
                        <strong>TDEE Estimates:</strong><br>
                        Sedentary: ${formatNumber(sedentary)} cal<br>
                        Light Active: ${formatNumber(light)} cal<br>
                        Moderate: ${formatNumber(moderate)} cal<br>
                        Active: ${formatNumber(active)} cal<br>
                        Very Active: ${formatNumber(veryActive)} cal
                    </div>
                </div>
            `;
            
            animateResult('result-bmr');
        }, 300));

        // ==================== MACRO CALCULATOR ====================
        const calculateMacros = rateLimit('calculateMacros', debounce(function() {
            const calories = parseFloat(document.getElementById('macro-calories').value);
            const goal = document.getElementById('macro-goal').value;
            const result = document.getElementById('result-macros');
            
            const caloriesValid = validateInput('macro-calories', 1000, 5000, 'error-macro-calories', 'success-macro-calories');
            
            if (!caloriesValid) {
                result.textContent = 'Enter your calorie target above';
                return;
            }
            
            let proteinPercent, carbPercent, fatPercent, goalName;
            
            switch(goal) {
                case 'balanced':
                    proteinPercent = 30;
                    carbPercent = 35;
                    fatPercent = 35;
                    goalName = 'Balanced Diet';
                    break;
                case 'lowcarb':
                    proteinPercent = 40;
                    carbPercent = 20;
                    fatPercent = 40;
                    goalName = 'Low Carb';
                    break;
                case 'highprotein':
                    proteinPercent = 40;
                    carbPercent = 30;
                    fatPercent = 30;
                    goalName = 'High Protein';
                    break;
                case 'keto':
                    proteinPercent = 25;
                    carbPercent = 5;
                    fatPercent = 70;
                    goalName = 'Ketogenic';
                    break;
                case 'athlete':
                    proteinPercent = 30;
                    carbPercent = 50;
                    fatPercent = 20;
                    goalName = 'Athlete/Endurance';
                    break;
            }
            
            // Calculate grams (protein: 4 cal/g, carbs: 4 cal/g, fat: 9 cal/g)
            const proteinGrams = Math.round((calories * proteinPercent / 100) / 4);
            const carbGrams = Math.round((calories * carbPercent / 100) / 4);
            const fatGrams = Math.round((calories * fatPercent / 100) / 9);
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.02rem;">
                    <div style="font-weight: 800; font-size: 1.12rem; margin-bottom: 12px;">
                        🎯 ${goalName} (${proteinPercent}/${carbPercent}/${fatPercent})
                    </div>
                    <div style="font-size: 1.05rem;">
                        🥩 <strong>Protein:</strong> ${proteinGrams}g (${proteinPercent}%)<br>
                        🍞 <strong>Carbs:</strong> ${carbGrams}g (${carbPercent}%)<br>
                        🥑 <strong>Fats:</strong> ${fatGrams}g (${fatPercent}%)
                    </div>
                    <div style="font-size: 0.88rem; margin-top: 12px; opacity: 0.9;">
                        Total: ${formatNumber(calories)} calories/day
                    </div>
                </div>
            `;
            
            animateResult('result-macros');
        }, 300));

        // ==================== HEART RATE ZONES ====================
        const calculateHeartRate = rateLimit('calculateHeartRate', debounce(function() {
            const age = parseFloat(document.getElementById('hr-age').value);
            const resting = parseFloat(document.getElementById('hr-resting').value);
            const result = document.getElementById('result-heartrate');
            
            const ageValid = validateInput('hr-age', 15, 100, 'error-hr-age', 'success-hr-age');
            
            if (!ageValid) {
                result.textContent = 'Enter your age above';
                return;
            }
            
            // Validate resting HR if provided
			let restingValid = true;
			if (resting) {
				restingValid = validateInput('hr-resting', 30, 100, 'error-hr-resting', 'success-hr-resting');
			}

			// Calculate max heart rate
			const maxHR = 220 - age;

			// VALIDACIÓN CRÍTICA: Resting HR no puede ser >= Max HR
			if (resting && resting >= maxHR) {
				const restingInput = document.getElementById('hr-resting');
				restingInput.classList.add('error');
				restingInput.classList.remove('valid');
				const errorMsg = document.getElementById('error-hr-resting');
				if (errorMsg) {
					errorMsg.textContent = `Resting HR (${resting}) cannot be ≥ Max HR (${maxHR}). Please check values.`;
					errorMsg.style.display = 'block';
				}
				result.innerHTML = `
					<div style="line-height: 1.8;">
						⚠️ Invalid Resting Heart Rate<br>
						<span style="font-size: 0.95rem;">Resting HR must be lower than Max HR (${maxHR} bpm)</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
				animateResult('result-heartrate');
				return;
			}

			let zone1Min, zone1Max, zone2Min, zone2Max, zone3Min, zone3Max, zone4Min, zone4Max, zone5Min, zone5Max;
			let methodUsed = '';

			if (resting && restingValid && resting >= 30 && resting <= 100 && resting < maxHR) {
				// Karvonen Formula (more accurate with resting HR)
				const hrReserve = maxHR - resting;
                zone1Min = Math.round((hrReserve * 0.50) + resting);
                zone1Max = Math.round((hrReserve * 0.60) + resting);
                zone2Min = Math.round((hrReserve * 0.60) + resting);
                zone2Max = Math.round((hrReserve * 0.70) + resting);
                zone3Min = Math.round((hrReserve * 0.70) + resting);
                zone3Max = Math.round((hrReserve * 0.80) + resting);
                zone4Min = Math.round((hrReserve * 0.80) + resting);
                zone4Max = Math.round((hrReserve * 0.90) + resting);
                zone5Min = Math.round((hrReserve * 0.90) + resting);
                zone5Max = maxHR;
                methodUsed = '(Karvonen Method)';
            } else {
                // Simple percentage method
                zone1Min = Math.round(maxHR * 0.50);
                zone1Max = Math.round(maxHR * 0.60);
                zone2Min = Math.round(maxHR * 0.60);
                zone2Max = Math.round(maxHR * 0.70);
                zone3Min = Math.round(maxHR * 0.70);
                zone3Max = Math.round(maxHR * 0.80);
                zone4Min = Math.round(maxHR * 0.80);
                zone4Max = Math.round(maxHR * 0.90);
                zone5Min = Math.round(maxHR * 0.90);
                zone5Max = maxHR;
                methodUsed = '(% of Max HR)';
            }
            
            result.innerHTML = `
                <div style="line-height: 1.8; font-size: 0.96rem; text-align: left;">
                    <div style="text-align: center; font-weight: 800; font-size: 1.12rem; margin-bottom: 12px;">
                        ❤️ Max HR: ${maxHR} bpm ${methodUsed}
                    </div>
                    <div style="font-size: 0.94rem;">
                        <strong>Zone 1 (50-60%):</strong> ${zone1Min}-${zone1Max} - Recovery<br>
                        <strong>Zone 2 (60-70%):</strong> ${zone2Min}-${zone2Max} - Fat Burn<br>
                        <strong>Zone 3 (70-80%):</strong> ${zone3Min}-${zone3Max} - Aerobic<br>
                        <strong>Zone 4 (80-90%):</strong> ${zone4Min}-${zone4Max} - Anaerobic<br>
                        <strong>Zone 5 (90-100%):</strong> ${zone5Min}-${zone5Max} - Max Effort
                    </div>
                    ${resting ? `<div style="font-size: 0.85rem; margin-top: 10px; opacity: 0.9;">Resting HR: ${resting} bpm</div>` : '<div style="font-size: 0.85rem; margin-top: 10px; opacity: 0.9;">💡 Add resting HR for more accuracy</div>'}
                </div>
            `;
            
            animateResult('result-heartrate');
        }, 300));

        // ==================== BLOOD PRESSURE TRACKER ====================
        const calculateBloodPressure = rateLimit('calculateBloodPressure', debounce(function() {
			const systolic = parseFloat(document.getElementById('bp-systolic').value);
			const diastolic = parseFloat(document.getElementById('bp-diastolic').value);
			const result = document.getElementById('result-bp');
			const systolicInput = document.getElementById('bp-systolic');
			const diastolicInput = document.getElementById('bp-diastolic');
    
			const systolicValid = validateInput('bp-systolic', 70, 200, 'error-bp-systolic', 'success-bp-systolic');
			const diastolicValid = validateInput('bp-diastolic', 40, 130, 'error-bp-diastolic', 'success-bp-diastolic');
    
			if (!systolicValid || !diastolicValid) {
				result.textContent = 'Enter your blood pressure above';
				return;
			}
    
			// VALIDACIÓN CRUZADA EN TIEMPO REAL: Validate systolic > diastolic
			if (systolic <= diastolic) {
				systolicInput.classList.add('error');
				diastolicInput.classList.add('error');
				systolicInput.classList.remove('valid');
				diastolicInput.classList.remove('valid');
        
				const errorSystolic = document.getElementById('error-bp-systolic');
				const errorDiastolic = document.getElementById('error-bp-diastolic');
				if (errorSystolic) errorSystolic.textContent = 'Systolic must be > diastolic';
				if (errorDiastolic) errorDiastolic.textContent = 'Diastolic must be < systolic';
				if (errorSystolic) errorSystolic.style.display = 'block';
				if (errorDiastolic) errorDiastolic.style.display = 'block';
                result.innerHTML = `
                    <div style="line-height: 1.8;">
                        ⚠️ Invalid Reading<br>
                        <span style="font-size: 0.95rem;">Systolic must be higher than diastolic</span>
                    </div>
                `;
                result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                animateResult('result-bp');
                return;
            }
            
            // Determine category (American Heart Association guidelines)
            let category, color, advice, emoji, urgency;
            
            if (systolic < 90 || diastolic < 60) {
                category = 'Low Blood Pressure';
                color = '#3b82f6';
                advice = 'Consult doctor if symptomatic';
                emoji = '🔵';
                urgency = '';
            } else if (systolic < 120 && diastolic < 80) {
                category = 'Normal';
                color = '#10b981';
                advice = 'Maintain healthy lifestyle';
                emoji = '✅';
                urgency = '';
            } else if (systolic >= 120 && systolic < 130 && diastolic < 80) {
                category = 'Elevated';
                color = '#f59e0b';
                advice = 'Adopt healthy habits now';
                emoji = '⚠️';
                urgency = '';
            } else if ((systolic >= 130 && systolic < 140) || (diastolic >= 80 && diastolic < 90)) {
                category = 'Stage 1 Hypertension';
                color = '#f97316';
                advice = 'Consult your doctor';
                emoji = '🟠';
                urgency = '';
            } else if (systolic >= 140 || diastolic >= 90) {
                category = 'Stage 2 Hypertension';
                color = '#dc2626';
                advice = 'Medical attention needed';
                emoji = '🔴';
                urgency = '';
            }
            
            if (systolic > 180 || diastolic > 120) {
                category = 'Hypertensive Crisis';
                color = '#991b1b';
                advice = 'SEEK IMMEDIATE MEDICAL CARE!';
                emoji = '🚨';
                urgency = '<div style="background: rgba(255,255,255,0.3); padding: 12px; border-radius: 10px; margin-top: 12px; font-weight: 800; font-size: 1.05rem;">⚠️ EMERGENCY - Call 911 or go to ER</div>';
            }
            
            result.innerHTML = `
				<div style="line-height: 1.8;">
					<div style="font-size: 1.5rem; font-weight: 800; margin-bottom: 8px;">
						${sanitizeNumber(systolic)}/${sanitizeNumber(diastolic)} mmHg
					</div>
					<div style="font-size: 1.12rem; font-weight: 700; margin-bottom: 10px;">
						${escapeHTML(emoji)} ${escapeHTML(category)}
					</div>
					<div style="font-size: 0.98rem;">
						${escapeHTML(advice)}
					</div>
					${urgency}
				</div>
			`;

			// Sanitizar color antes de usarlo en background (aunque son valores controlados)
			const safeColor = escapeHTML(color);
			result.style.background = `linear-gradient(135deg, ${safeColor} 0%, ${safeColor}dd 100%)`;
            animateResult('result-bp');
        }, 300));

        // ==================== PREGNANCY WEIGHT GAIN ====================
        const calculatePregWeight = rateLimit('calculatePregWeight', debounce(function() {
			const height = parseFloat(document.getElementById('pw-height').value);
			const preWeight = parseFloat(document.getElementById('pw-preweight').value);
			const twins = document.getElementById('pw-twins').value;
			const result = document.getElementById('result-pregweight');
    
			const heightValid = validateInput('pw-height', 100, 220, 'error-pw-height', 'success-pw-height');
			const weightValid = validateInput('pw-preweight', 35, 200, 'error-pw-preweight', 'success-pw-preweight');
    
			if (!heightValid || !weightValid) {
				result.textContent = 'Enter your information above';
				return;
			}
    
			// VALIDACIÓN DE RANGES REALISTAS: BMI debe estar en rango humano posible
			const heightInMeters = height / 100;
			const bmi = preWeight / (heightInMeters * heightInMeters);
    
			// BMI extremadamente bajo (<10) o extremadamente alto (>70) son médicamente imposibles
			if (bmi < 10 || bmi > 70) {
				result.innerHTML = `
					<div style="line-height: 1.8;">
						⚠️ Invalid Measurements<br>
						<span style="font-size: 0.95rem;">BMI calculated: ${bmi.toFixed(1)}<br>
						Please verify height and weight values</span>
					</div>
				`;
				result.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
				animateResult('result-pregweight');
				return;
			}
            
            // Determine weight gain recommendation (IOM guidelines)
            let minGainKg, maxGainKg, category, emoji;
            
            if (twins === 'twins') {
                // Twin pregnancy guidelines
                if (bmi < 18.5) {
                    category = 'Underweight';
                    minGainKg = 16.8;
                    maxGainKg = 24.5;
                    emoji = '👶👶';
                } else if (bmi < 25) {
                    category = 'Normal Weight';
                    minGainKg = 16.8;
                    maxGainKg = 24.5;
                    emoji = '👶👶';
                } else if (bmi < 30) {
                    category = 'Overweight';
                    minGainKg = 14.1;
                    maxGainKg = 22.7;
                    emoji = '👶👶';
                } else {
                    category = 'Obese';
                    minGainKg = 11.3;
                    maxGainKg = 19.1;
                    emoji = '👶👶';
                }
            } else {
                // Single pregnancy guidelines
                if (bmi < 18.5) {
                    category = 'Underweight';
                    minGainKg = 12.7;
                    maxGainKg = 18.1;
                    emoji = '🤰';
                } else if (bmi < 25) {
                    category = 'Normal Weight';
                    minGainKg = 11.3;
                    maxGainKg = 15.9;
                    emoji = '🤰';
                } else if (bmi < 30) {
                    category = 'Overweight';
                    minGainKg = 6.8;
                    maxGainKg = 11.3;
                    emoji = '🤰';
                } else {
                    category = 'Obese';
                    minGainKg = 5.0;
                    maxGainKg = 9.1;
                    emoji = '🤰';
                }
            }
            
            // Convert to lbs
            const minGainLbs = Math.round(minGainKg * 2.20462);
            const maxGainLbs = Math.round(maxGainKg * 2.20462);
            
            // Calculate weekly rate for 2nd/3rd trimester
            const weeklyRateKg = ((minGainKg + maxGainKg) / 2 - 2) / 26; // Subtract ~2kg for 1st trimester, divide by 26 weeks
            const weeklyRateLbs = (weeklyRateKg * 2.20462).toFixed(1);
            
            const pregnancyType = twins === 'twins' ? ' (Twins)' : '';
            
            result.innerHTML = `
                <div style="line-height: 1.9; font-size: 1.02rem;">
                    <div style="font-weight: 800; font-size: 1.12rem; margin-bottom: 10px;">
                        ${emoji} Pre-pregnancy: ${category}
                    </div>
                    <div style="font-size: 0.95rem; margin-bottom: 12px;">
                        BMI: ${bmi.toFixed(1)}${pregnancyType}
                    </div>
                    <div style="font-size: 1.08rem; font-weight: 700; margin-bottom: 10px;">
                        📊 Recommended Total Gain:
                    </div>
                    <div style="font-size: 1.15rem; font-weight: 800;">
                        ${minGainKg.toFixed(1)}-${maxGainKg.toFixed(1)} kg
                    </div>
                    <div style="font-size: 1.02rem; opacity: 0.95; margin-bottom: 12px;">
                        (${minGainLbs}-${maxGainLbs} lbs)
                    </div>
                    <div style="font-size: 0.88rem; opacity: 0.9;">
                        📈 2nd/3rd Trimester: ~${weeklyRateLbs} lbs/week<br>
                        💡 1st Trimester: 1-5 lbs total
                    </div>
                </div>
            `;
            
            animateResult('result-pregweight');
        }, 300));

        // ==================== CLEAR CALCULATOR FUNCTION ====================
        function clearCalculator(calcId) {
            const card = document.getElementById(calcId);
            if (!card) return;
            
            // Clear all inputs
            const inputs = card.querySelectorAll('input[type="number"], input[type="date"]');
            inputs.forEach(input => {
                input.value = '';
                input.classList.remove('error', 'valid');
            });
            
            // Reset selects to first option
            const selects = card.querySelectorAll('select');
            selects.forEach(select => {
                select.selectedIndex = 0;
            });
            
            // Clear error and success messages
            const errorMessages = card.querySelectorAll('.error-message');
            errorMessages.forEach(msg => {
                msg.style.display = 'none';
            });
            
            const successMessages = card.querySelectorAll('.success-message');
            successMessages.forEach(msg => {
                msg.style.display = 'none';
            });
            
            // Hide progress indicators
            const progressIndicators = card.querySelectorAll('.progress-indicator');
            progressIndicators.forEach(indicator => {
                indicator.style.display = 'none';
            });
            
            // Reset result based on calculator type
            const result = card.querySelector('.result');
            if (result) {
                // Reset background to default
                result.style.background = 'linear-gradient(135deg, #6ee7b7 0%, #34d399 25%, #10b981 50%, #059669 75%, #047857 100%)';
                
                const calcType = calcId.split('-')[0];
                switch(calcType) {
                    case 'bmi':
                        result.textContent = 'Enter your measurements above';
                        break;
                    case 'calorie':
                    case 'water':
                    case 'bodyfat':
                    case 'bmr':
                    case 'pregweight':
                        result.textContent = 'Enter your information above';
                        break;
                    case 'pregnancy':
                        result.textContent = 'Select your LMP date above';
                        break;
                    case 'ovulation':
                        result.textContent = 'Enter your cycle information above';
                        break;
                    case 'idealweight':
                        result.textContent = 'Enter your height above';
                        break;
                    case 'macro':
                        result.textContent = 'Enter your calorie target above';
                        break;
                    case 'heartrate':
                        result.textContent = 'Enter your age above';
                        break;
                    case 'bp':
                        result.textContent = 'Enter your blood pressure above';
                        break;
                    default:
                        result.textContent = 'Enter values above';
                }
            }
            
            // Focus first input
            const firstInput = card.querySelector('input:not([type="hidden"]), select');
            if (firstInput) {
                firstInput.focus();
            }
        }

        // ==================== MODAL FUNCTIONS ====================
        function openModal(modalId) {
			const modal = document.getElementById(modalId);
			if (modal) {
				modal.classList.add('show');
				document.body.style.overflow = 'hidden';

				// Force scroll to top usando requestAnimationFrame (sincronizado con repaint)
				const modalContent = modal.querySelector('.info-modal-content');
				if (modalContent) {
					modalContent.scrollTop = 0;
            
					// Doble RAF para asegurar que ocurra después del layout
					requestAnimationFrame(() => {
						requestAnimationFrame(() => {
							modalContent.scrollTop = 0;
						});
					});
				}

				// Trap focus within modal
				const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
				const firstElement = focusableElements[0];
				const lastElement = focusableElements[focusableElements.length - 1];

				if (firstElement) {
					// También usar RAF para el focus
					requestAnimationFrame(() => {
						firstElement.focus();
					});
				}
			}
		}

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                document.body.style.overflow = '';
            }
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('info-modal')) {
                event.target.classList.remove('show');
                document.body.style.overflow = '';
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modals = document.querySelectorAll('.info-modal.show');
                modals.forEach(modal => {
                    modal.classList.remove('show');
                    document.body.style.overflow = '';
                });
            }
        });

        // Make info icons keyboard accessible
        document.querySelectorAll('.info-icon').forEach(icon => {
            icon.addEventListener('keypress', function(event) {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    const modalId = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    openModal(modalId);
                }
            });
        });

        // ==================== BITCOIN ADDRESS COPY FUNCTION ====================
        function copyBitcoinAddress(button) {
            const address = 'bc1qxfc70kg5gtavn3mw5nypps970hqkzw6c885ya4';
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(address).then(() => {
                    const originalText = button.textContent;
                    button.textContent = '✓ Copied!';
                    button.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = 'linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%)';
                    }, 2500);
                }).catch(() => {
                    copyToClipboardFallback(address, button);
                });
            } else {
                copyToClipboardFallback(address, button);
            }
        }

        function copyToClipboardFallback(text, button) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                const originalText = button.textContent;
                button.textContent = '✓ Copied!';
                button.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%)';
                }, 2500);
            } catch (err) {
                button.textContent = '❌ Copy failed';
                setTimeout(() => {
                    button.textContent = '📋 Copy Address';
                }, 2500);
            }
            
            document.body.removeChild(textArea);
        }

        // ==================== ANIMATION ON LOAD ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Animate calculator cards on load
            const cards = document.querySelectorAll('.calc-card, .info-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 50);
            });

            // Set max date for date inputs to today y actualizar diariamente
			function updateMaxDateForInputs() {
				const today = new Date().toISOString().split('T')[0];
				const dateInputs = document.querySelectorAll('input[type="date"]');
				dateInputs.forEach(input => {
					input.setAttribute('max', today);
				});
			}

			// Ejecutar inmediatamente
			updateMaxDateForInputs();

			// Actualizar cada 60 minutos para páginas que quedan abiertas varios días
			setInterval(updateMaxDateForInputs, 60 * 60 * 1000);

			// También actualizar cuando la página vuelve a estar visible
			document.addEventListener('visibilitychange', function() {
				if (!document.hidden) {
					updateMaxDateForInputs();
				}
			});
        });

        // ==================== PREVENT FORM SUBMISSION ON ENTER ====================
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    // Trigger calculation for the current calculator
                    const calcCard = input.closest('.calc-card');
                    if (calcCard) {
                        const calcId = calcCard.id;
                        // Blur the input to trigger calculation
                        input.blur();
                    }
                }
            });
        });

        // ==================== SANITIZE NUMERIC INPUT ====================
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', function(e) {
                // Allow decimals for weight/height inputs
                let value = this.value;
                
                // Remove any non-numeric characters except decimal point and minus
                value = value.replace(/[^0-9.-]/g, '');
                
                // Ensure only one decimal point
                const parts = value.split('.');
                if (parts.length > 2) {
                    value = parts[0] + '.' + parts.slice(1).join('');
                }
                
                // Ensure only one minus sign at the beginning
                if (value.indexOf('-') > 0) {
                    value = value.replace(/-/g, '');
                }
                
                this.value = value;
            });
            
            // Prevent scroll wheel from changing number
            input.addEventListener('wheel', function(e) {
                e.preventDefault();
            }, { passive: false });
        });

        // ==================== ACCESSIBILITY IMPROVEMENTS ====================
        
        // Add ARIA live regions for results
        document.querySelectorAll('.result').forEach(result => {
            result.setAttribute('aria-live', 'polite');
            result.setAttribute('aria-atomic', 'true');
        });

        // Add keyboard navigation for calculator cards
        document.querySelectorAll('.calc-card').forEach(card => {
            const inputs = card.querySelectorAll('input, select');
            inputs.forEach((input, index) => {
                input.addEventListener('keydown', function(event) {
                    if (event.key === 'ArrowDown' && index < inputs.length - 1) {
                        event.preventDefault();
                        inputs[index + 1].focus();
                    } else if (event.key === 'ArrowUp' && index > 0) {
                        event.preventDefault();
                        inputs[index - 1].focus();
                    }
                });
            });
        });

        // ==================== PERFORMANCE MONITORING ====================
        
        // Log page load performance
        window.addEventListener('load', function() {
            if (window.performance && window.performance.timing) {
                const perfData = window.performance.timing;
                const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                
                // Only log if less than 5 seconds (good performance)
                if (pageLoadTime < 5000) {
                    console.log('✅ Page loaded in ' + (pageLoadTime / 1000).toFixed(2) + ' seconds');
                }
            }
        });

        // ==================== ERROR HANDLING ====================
        
        // Global error handler
        window.addEventListener('error', function(event) {
            console.error('Error occurred:', event.error);
            // Optionally show user-friendly error message
        });

        // ==================== SMOOTH SCROLL FOR ANCHOR LINKS ====================
        
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ==================== AUTO-SAVE CALCULATOR STATE (OPTIONAL) ====================
        
        // Save calculator inputs to sessionStorage for recovery
        const STORAGE_KEY = 'healthCalcState';
        
        // Variable para trackear si sessionStorage está disponible
		let isStorageAvailable = null;

		function checkStorageAvailability() {
			if (isStorageAvailable !== null) return isStorageAvailable;
    
			try {
				const test = '__storage_test__';
				sessionStorage.setItem(test, test);
				sessionStorage.removeItem(test);
				isStorageAvailable = true;
				return true;
			} catch (e) {
				isStorageAvailable = false;
				console.warn('SessionStorage not available:', e.name);
				return false;
			}
		}

		function saveCalculatorState() {
			// Verificar disponibilidad ANTES de intentar usar
			if (!checkStorageAvailability()) return;
    
			const state = {};
			try {
				document.querySelectorAll('input, select').forEach(input => {
					if (input.id && input.value) {
						state[input.id] = input.value;
					}
				});
				sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state));
			} catch (e) {
				// Manejar casos específicos
				if (e.name === 'QuotaExceededError') {
					console.warn('Storage quota exceeded, clearing old data');
					try {
						sessionStorage.clear();
						sessionStorage.setItem(STORAGE_KEY, JSON.stringify(state));
					} catch (retryError) {
						console.error('Cannot save even after clearing:', retryError);
						isStorageAvailable = false;
					}
				} else if (e.name === 'SecurityError') {
					console.warn('Storage blocked by browser security settings');
					isStorageAvailable = false;
				} else {
					console.error('Unexpected storage error:', e);
				}
			}
		}

		function restoreCalculatorState() {
			if (!checkStorageAvailability()) return;
    
			try {
				const savedState = sessionStorage.getItem(STORAGE_KEY);
				if (savedState) {
					const state = JSON.parse(savedState);
					Object.keys(state).forEach(id => {
						const input = document.getElementById(id);
						if (input) {
							input.value = state[id];
						}
					});
				}
			} catch (e) {
				if (e instanceof SyntaxError) {
					console.warn('Corrupted storage data, clearing:', e);
					try {
						sessionStorage.removeItem(STORAGE_KEY);
					} catch (clearError) {
						console.error('Cannot clear corrupted data:', clearError);
					}
				} else {
					console.error('Cannot restore state:', e);
				}
			}
		}

        // Auto-save on input change (debounced)
        const debouncedSave = debounce(saveCalculatorState, 1000);
        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('change', debouncedSave);
        });

        // Restore state on page load
        window.addEventListener('load', restoreCalculatorState);

        // ==================== PRINT FUNCTIONALITY ====================
        
        window.addEventListener('beforeprint', function() {
            // Expand all calculators before printing
            document.querySelectorAll('.calc-card').forEach(card => {
                card.style.pageBreakInside = 'avoid';
            });
        });

        // ==================== CONSOLE EASTER EGG ====================
        
        console.log('%c🏥 RapidPercent Health Calculators', 'font-size: 20px; font-weight: bold; color: #2dd4bf;');
        console.log('%cProfessional health tools using scientifically validated formulas', 'font-size: 12px; color: #10b981;');
        console.log('%cBuilt with ❤️ for accurate health tracking', 'font-size: 11px; color: #059669;');
        
        // ==================== SERVICE WORKER REGISTRATION (OPTIONAL) ====================
        
        // Uncomment to enable offline functionality
        /*
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('✅ ServiceWorker registered:', registration.scope);
                }).catch(function(err) {
                    console.log('❌ ServiceWorker registration failed:', err);
                });
            });
        }
        */

        // ==================== INITIALIZATION COMPLETE ====================
        
        console.log('✅ Health Calculator Suite initialized successfully');
        
		// ==================== STICKY MEDICAL DISCLAIMER ====================

		const stickyDisclaimer = document.getElementById('stickyDisclaimer');
		let disclaimerDismissed = false;

		function handleStickyDisclaimer() {
			if (disclaimerDismissed) return;
    
			const scrollY = window.scrollY;
			const windowHeight = window.innerHeight;
			const documentHeight = document.documentElement.scrollHeight;
			const nearBottom = scrollY + windowHeight > documentHeight - 200;
    
			if (scrollY > 300 && !nearBottom) {
				stickyDisclaimer.classList.add('visible');
			} else {
				stickyDisclaimer.classList.remove('visible');
			}
		}

		function closeStickyDisclaimer() {
			disclaimerDismissed = true;
			stickyDisclaimer.classList.remove('visible');
    
			if (checkStorageAvailability()) {
				try {
					sessionStorage.setItem('disclaimerDismissed', 'true');
				} catch (e) {}
			}
		}

		function checkDisclaimerState() {
			if (checkStorageAvailability()) {
				try {
					disclaimerDismissed = sessionStorage.getItem('disclaimerDismissed') === 'true';
				} catch (e) {}
			}
		}

		checkDisclaimerState();
		window.addEventListener('scroll', debounce(handleStickyDisclaimer, 50));
		
    </script>
</body>
</html>
